"use strict";(self.webpackChunkweb_mrv=self.webpackChunkweb_mrv||[]).push([[853],{6770:function(e,t,n){n.d(t,{A:function(){return d}});var a=n(6237),i=n(7419),r=n(1645),s=n(5696),c=n(8387),l=n(579),d=function(e){var t=e.calledIn,n=e.entId,d=e.isValidated;return(0,l.jsx)(i.A,{children:(0,l.jsx)(r.A,{children:(0,l.jsx)(s.A,{title:d?"Validated ".concat(t):void 0,showArrow:!1,placement:"right",children:(0,l.jsx)(c.A,{icon:d?(0,l.jsx)(a.A,{style:{color:"#8A1538"}}):void 0,className:"entity-id-card",children:"".concat(t," ID: ").concat(n)})})})})}},1048:function(e,t,n){n.d(t,{R:function(){return o}});var a=n(6655),i=n(1645),r=n(289),s=n(3307),c=n(7419),l=(n(6698),n(1966)),d=n(579),o=function(e){var t=e.rules,n=e.index,o=e.headerNames,u=e.kpi,m=e.updateKPI,p=e.removeKPI,h=e.isFromActivity;return(0,d.jsxs)(c.A,{gutter:30,className:"kpi-grid",children:[(0,d.jsx)(i.A,{span:12,children:(0,d.jsxs)(c.A,{gutter:30,children:[(0,d.jsx)(i.A,{span:12,children:(0,d.jsx)(r.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[0]}),name:"kpi_name_".concat(n),rules:h?[]:t,initialValue:null===u||void 0===u?void 0:u.name,children:(0,d.jsx)(s.A,{className:"form-input-box",onChange:function(e){m&&m(n,"name",e.target.value,"created")},disabled:h})})}),(0,d.jsx)(i.A,{span:12,children:(0,d.jsx)(r.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[1]}),name:"kpi_unit_".concat(n),rules:h?[]:t,initialValue:null===u||void 0===u?void 0:u.unit,children:(0,d.jsx)(s.A,{className:"form-input-box",onChange:function(e){m&&m(n,"unit",e.target.value,"created")},disabled:h})})})]})}),(0,d.jsx)(i.A,{span:12,children:(0,d.jsxs)(c.A,{gutter:15,children:[(0,d.jsx)(i.A,{span:h?12:11,children:(0,d.jsx)(r.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[2]}),name:"kpi_ach_".concat(n),initialValue:null===u||void 0===u?void 0:u.achieved,rules:h?t:[],children:(0,d.jsx)(s.A,{type:"number",min:0,step:.01,className:"form-input-box",onChange:function(e){m&&m(n,"achieved",e.target.value,"created")},disabled:!h})})}),(0,d.jsx)(i.A,{span:h?12:11,children:(0,d.jsx)(r.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[3]}),name:"kpi_exp_".concat(n),rules:h?[]:t,initialValue:null===u||void 0===u?void 0:u.expected,children:(0,d.jsx)(s.A,{type:"number",min:0,step:.01,className:"form-input-box",onChange:function(e){m&&m(n,"expected",e.target.value,"created")},disabled:h})})}),!h&&(0,d.jsx)(i.A,{span:2,children:(0,d.jsx)(a.A,{className:"delete-card",children:(0,d.jsx)(l.A,{style:{cursor:"pointer",color:"#3A3541",opacity:.8},onClick:function(){p&&p(n,"created")}})})})]})})]},n)}},1320:function(e,t,n){n.d(t,{r:function(){return o}});var a=n(1966),i=n(6655),r=n(1645),s=n(289),c=n(3307),l=n(7419),d=(n(6698),n(579)),o=function(e){var t=e.rules,n=e.index,o=e.headerNames,u=e.updateKPI,m=e.removeKPI;return(0,d.jsxs)(l.A,{gutter:30,className:"kpi-grid",children:[(0,d.jsx)(r.A,{span:12,children:(0,d.jsxs)(l.A,{gutter:30,children:[(0,d.jsx)(r.A,{span:12,children:(0,d.jsx)(s.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[0]}),name:"kpi_name_".concat(n),rules:t,children:(0,d.jsx)(c.A,{className:"form-input-box",onChange:function(e){u&&u(n,"name",e.target.value,"new")}})})}),(0,d.jsx)(r.A,{span:12,children:(0,d.jsx)(s.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[1]}),name:"kpi_unit_".concat(n),rules:t,children:(0,d.jsx)(c.A,{className:"form-input-box",onChange:function(e){u&&u(n,"unit",e.target.value,"new")}})})})]})}),(0,d.jsx)(r.A,{span:12,children:(0,d.jsxs)(l.A,{gutter:15,children:[(0,d.jsx)(r.A,{span:11,children:(0,d.jsx)(s.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[2]}),name:"kpi_ach_".concat(n),children:(0,d.jsx)(c.A,{type:"number",className:"form-input-box",disabled:!0})})}),(0,d.jsx)(r.A,{span:11,children:(0,d.jsx)(s.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:o[3]}),name:"kpi_exp_".concat(n),rules:t,children:(0,d.jsx)(c.A,{type:"number",min:0,step:.01,className:"form-input-box",onChange:function(e){u&&u(n,"expected",e.target.value,"new")}})})}),(0,d.jsx)(r.A,{span:2,children:(0,d.jsx)(i.A,{className:"delete-card",children:(0,d.jsx)(a.A,{style:{cursor:"pointer",color:"#3A3541",opacity:.8},onClick:function(){m&&m(n,"new")}})})})]})})]},n)}},2613:function(e,t,n){n.d(t,{Q:function(){return u}});var a=n(1645),i=n(289),r=n(3307),s=n(7419),c=n(5696),l=(n(6698),n(3722)),d=n(716),o=n(579),u=function(e){var t=e.index,n=e.inherited,u=e.headerNames,m=e.kpi,p=e.callingEntityId,h=e.ownerEntityId;return(0,o.jsxs)(s.A,{gutter:30,className:"kpi-grid",children:[(0,o.jsx)(a.A,{span:12,children:(0,o.jsxs)(s.A,{gutter:30,children:[(0,o.jsx)(a.A,{span:12,children:(0,o.jsx)(i.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:u[0]}),name:"kpi_name_".concat(t),initialValue:null===m||void 0===m?void 0:m.name,children:(0,o.jsx)(r.A,{className:"form-input-box",disabled:!0})})}),(0,o.jsx)(a.A,{span:12,children:(0,o.jsx)(i.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:u[1]}),name:"kpi_unit_".concat(t),initialValue:null===m||void 0===m?void 0:m.unit,children:(0,o.jsx)(r.A,{className:"form-input-box",disabled:!0})})})]})}),(0,o.jsx)(a.A,{span:12,children:(0,o.jsxs)(s.A,{gutter:15,children:[(0,o.jsx)(a.A,{span:11,children:(0,o.jsx)(i.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:u[2]}),name:"kpi_ach_".concat(t),initialValue:null===m||void 0===m?void 0:m.achieved,children:(0,o.jsx)(r.A,{type:"number",className:"form-input-box",disabled:!0})})}),(0,o.jsx)(a.A,{span:11,children:(0,o.jsx)(i.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:u[3]}),name:"kpi_exp_".concat(t),initialValue:null===m||void 0===m?void 0:m.expected,children:(0,o.jsx)(r.A,{type:"number",className:"form-input-box",disabled:!0})})}),(0,o.jsx)(a.A,{span:2,children:(0,o.jsx)(c.A,{placement:"topLeft",title:n?"Inherited from ".concat(h):"Owned by ".concat(p),showArrow:!1,children:n?(0,o.jsx)(d.A,{className:"inherited-kpi"}):(0,o.jsx)(l.A,{className:"self-owned-kpi"})})})]})})]},t)}},9190:function(e,t,n){n.d(t,{A:function(){return g}});var a=n(2007),i=n(467),r=n(5544),s=n(460),c=n(3835),l=n(5043),d=n(2856),o=n(4117),u=n(318),m=n(2413),p=n(3627),h=n(4853),f=n(7589),A=n(8572),x=n(5432),v=n(8417),j=n(579),g=function(e){var t=e.recordType,n=e.recordId,g=(0,d.w5)().post,y=(0,o.Bd)(["updateTimeline"]).t,b=(0,l.useState)(!1),I=(0,r.A)(b,2),k=I[0],N=I[1],S=(0,l.useState)([]),w=(0,r.A)(S,2),T=w[0],C=w[1],H=function(){var e=(0,i.A)((0,a.A)().m(function e(){var i,r,s;return(0,a.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return N(!0),e.p=1,i={recordType:t,recordId:n},e.n=2,g("national/log/query",i);case 2:(r=e.v)&&C(r.data),e.n=4;break;case 3:e.p=3,s=e.v,(0,v.s)(s);case 4:return e.p=4,N(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)(function(){H()},[]);var D=function(e){switch(e){case"0":case"5":case"8":case"12":case"22":return(0,j.jsx)("span",{className:"step-icon created-step",children:(0,j.jsx)(u.A,{})});case"3":case"6":case"9":case"10":case"13":case"14":case"23":case"24":return(0,j.jsx)("span",{className:"step-icon link-step",children:(0,j.jsx)(m.A,{})});case"7":case"11":case"15":case"27":return(0,j.jsx)("span",{className:"step-icon unlink-step",children:(0,j.jsx)(m.A,{})});case"1":return(0,j.jsx)("span",{className:"step-icon addkpi-step",children:(0,j.jsx)(p.A,{})});case"18":case"19":case"21":case"25":case"28":return(0,j.jsx)("span",{className:"step-icon verify-step",children:(0,j.jsx)(h.A,{})});case"30":case"31":case"32":case"33":case"34":case"35":case"36":case"37":case"38":case"39":case"40":case"41":case"42":case"43":case"44":case"45":case"46":case"47":case"48":case"49":case"50":case"51":case"52":case"53":case"54":return(0,j.jsx)("span",{className:"step-icon unverify-step",children:(0,j.jsx)(f.A,{})});default:return(0,j.jsx)("span",{className:"step-icon default-step",children:(0,j.jsx)(A.A,{})})}},F=T.map(function(e,t){return{key:t,title:(0,j.jsxs)("span",{children:[(0,j.jsxs)("strong",{children:[null===e.user_id?"System":e.user_name," "]})," ",y(e.eventType)," ",e.logData&&" - ".concat(e.logData),(0,j.jsxs)("span",{className:"date",children:[" - ","".concat((0,x.n5)(Number(e.createdTime)))]})]}),icon:D(e.eventType),status:"process"}});return(0,j.jsx)("div",{className:"info-view",children:(0,j.jsx)("div",{className:"content",children:k?(0,j.jsx)(s.A,{}):(0,j.jsx)(c.A,{direction:"vertical",current:0,items:F})})})}},9217:function(e,t,n){n.d(t,{F:function(){return s}});var a=n(4117),i=n(9933),r=n(579),s=function(){var e=(0,a.Bd)(["formTable"]).t;return[{title:e("activityIdTitle"),dataIndex:"activityId",key:"activityId",render:function(e,t){return(0,r.jsx)("a",{href:"/activities/view/".concat(t.activityId),children:t.activityId})}},{title:e("titleTitle"),dataIndex:"title",key:"title"},{title:e("redMeasuresTitle"),dataIndex:"reductionMeasures",key:"reductionMeasures"},{title:e("statusTitle"),dataIndex:"status",key:"status"},{title:e("natImplementorTitle"),width:250,render:function(e,t){return(0,r.jsx)(i.A,{listToShow:t.natImplementor})}}]}},6499:function(e,t,n){n.d(t,{r:function(){return r}});var a=n(4117),i=n(579),r=function(){var e=(0,a.Bd)(["formTable"]).t;return[{title:e("supportIdTitle"),dataIndex:"supportId",key:"supportId",render:function(e,t){return(0,i.jsx)("a",{href:"/support/view/".concat(t.supportId),children:t.supportId})}},{title:e("financeNatureTitle"),dataIndex:"financeNature",key:"financeNature"},{title:e("directionTitle"),dataIndex:"direction",key:"direction"},{title:e("finInstrumentTitle"),dataIndex:"finInstrument",key:"finInstrument"},{title:e("neededUSDHeader"),dataIndex:"estimatedUSD",key:"estimatedUSD"},{title:e("neededLCLHeader"),dataIndex:"estimatedLC",key:"estimatedLC"},{title:e("recievedUSDHeader"),dataIndex:"recievedUSD",key:"recievedUSD"},{title:e("recievedLCLHeader"),dataIndex:"recievedLC",key:"recievedLC"}]}},1853:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});var a=n(9379),i=n(4467),r=n(436),s=n(2007),c=n(467),l=n(5544),d=n(4117),o=n(4406),u=n(3307),m=n(289),p=n(8193),h=n(7419),f=n(1645),A=n(9421),x=n(5696),v=n(5397),j=n(1966),g=n(4236),y=n(5043),b=n(8228),I=n(1186),k=n(3216),N=n(2856),S=n(4241),w=n(6770),T=n(5432),C=n(1054),H=n(9217),D=n(6499),F=n(9933),_=n(579),z=n(6240),R=n(5420),E=n(9190),V=n(1713),P=n(8726),q=n(1320),U=n(2613),M=n(1048),O=n(5515),G=n(1080),W=n(9662),L=n(9620),K=n(8417),B=o.A.Option,Z=u.A.TextArea,Q=30,X="13px",Y=function(e){for(var t,n=e.method,Y=m.A.useForm(),J=(0,l.A)(Y,1)[0],$=(0,d.Bd)(["actionForm","detachPopup","entityAction","formHeader","error"]).t,ee="view"===n,te=(0,T.$T)("Action",n),ne=(0,k.Zp)(),ae=(0,N.w5)(),ie=ae.get,re=ae.post,se=ae.put,ce=ae.delete,le=(0,z.V8)(),de=(0,V.ur)(),oe=de.userInfoState,ue=de.isValidationAllowed,me=de.setIsValidationAllowed,pe=(0,k.g)().entId,he=(0,C.F)(n),fe=(0,y.useState)(!1),Ae=(0,l.A)(fe,2),xe=Ae[0],ve=Ae[1],je=(0,y.useState)([]),ge=(0,l.A)(je,2),ye=ge[0],be=ge[1],Ie=(0,y.useState)([]),ke=(0,l.A)(Ie,2),Ne=ke[0],Se=ke[1],we=(0,y.useState)([]),Te=(0,l.A)(we,2),Ce=Te[0],He=Te[1],De=(0,y.useState)(!0),Fe=(0,l.A)(De,2),_e=Fe[0],ze=Fe[1],Re=(0,y.useState)(!1),Ee=(0,l.A)(Re,2),Ve=Ee[0],Pe=Ee[1],qe=(0,y.useState)(!1),Ue=(0,l.A)(qe,2),Me=Ue[0],Oe=Ue[1],Ge=(0,y.useState)(!1),We=(0,l.A)(Ge,2),Le=We[0],Ke=We[1],Be=(0,y.useState)(!1),Ze=(0,l.A)(Be,2),Qe=Ze[0],Xe=Ze[1],Ye=(0,y.useState)([]),Je=(0,l.A)(Ye,2),$e=Je[0],et=Je[1],tt=(0,y.useState)(1),nt=(0,l.A)(tt,2),at=nt[0],it=nt[1],rt=(0,y.useState)(10),st=(0,l.A)(rt,2),ct=st[0],lt=st[1],dt=(0,y.useState)([]),ot=(0,l.A)(dt,2),ut=ot[0],mt=ot[1],pt=(0,y.useState)(1),ht=(0,l.A)(pt,2),ft=ht[0],At=ht[1],xt=(0,y.useState)(10),vt=(0,l.A)(xt,2),jt=vt[0],gt=vt[1],yt=(0,y.useState)([]),bt=(0,l.A)(yt,2),It=bt[0],kt=bt[1],Nt=(0,y.useState)(1),St=(0,l.A)(Nt,2),wt=St[0],Tt=St[1],Ct=(0,y.useState)(10),Ht=(0,l.A)(Ct,2),Dt=Ht[0],Ft=Ht[1],_t=(0,y.useState)(!1),zt=(0,l.A)(_t,2),Rt=zt[0],Et=zt[1],Vt=(0,y.useState)(0),Pt=(0,l.A)(Vt,2),qt=Pt[0],Ut=Pt[1],Mt=(0,y.useState)([]),Ot=(0,l.A)(Mt,2),Gt=Ot[0],Wt=Ot[1],Lt=(0,y.useState)([]),Kt=(0,l.A)(Lt,2),Bt=Kt[0],Zt=Kt[1],Qt=(0,y.useState)(!1),Xt=(0,l.A)(Qt,2),Yt=Xt[0],Jt=Xt[1],$t=[],en=null!==(t=null===oe||void 0===oe?void 0:oe.userSectors)&&void 0!==t?t:[],tn=[],nn=2013;nn<=2049;nn++)tn.push(nn);(null===oe||void 0===oe?void 0:oe.userRole)===G.X.Root||(null===oe||void 0===oe?void 0:oe.userRole)===G.X.Admin?Object.values(P.h).map(function(e){return $t.push(e)}):en.map(function(e){return $t.push(e)});var an=function(){var e=(0,d.Bd)(["formTable"]).t;return[{title:e("programmeId"),dataIndex:"programmeId",key:"programmeId",render:function(e,t){return(0,_.jsx)("a",{href:"/programmes/view/".concat(t.programmeId),children:t.programmeId})}},{title:e("actionId"),dataIndex:"actionId",key:"actionId"},{title:e("programmeTitle"),dataIndex:"title",key:"title"},{title:e("programmeType"),dataIndex:"type",key:"title"},{title:e("programmeStatus"),dataIndex:"status",key:"status"},{title:e("subSectorAffected"),width:100,render:function(e,t){return(0,_.jsx)(F.A,{listToShow:t.subSectorsAffected})}},{title:e("investmentNeeds"),dataIndex:"estimatedInvestment",key:"estimatedInvestment"}]}(),rn=(0,H.F)(),sn=(0,D.r)(),cn=function(){var e=(0,c.A)((0,s.A)().m(function e(t){var a,i,r,c;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:for(a in e.p=0,Ke(!0),t)a.startsWith("kpi_")&&delete t[a];if(ye.length>0&&("create"===n?(t.documents=[],ye.forEach(function(e){t.documents.push({title:e.title,data:e.data})})):"update"===n&&(t.newDocuments=[],ye.forEach(function(e){t.newDocuments.push({title:e.title,data:e.data})}))),Ce.length>0&&(t.removedDocuments=[],Ce.forEach(function(e){var n;t.removedDocuments.push(null===(n=Ne.find(function(t){return t.key===e}))||void 0===n?void 0:n.url)})),"create"===n&&Bt.length>0?(t.kpis=[],Bt.forEach(function(e){t.kpis.push({name:e.name,kpiUnit:e.unit,creatorType:"action",expected:e.expected})})):"update"===n&&Yt&&(t.kpis=[],Bt.forEach(function(e){t.kpis.push({name:e.name,kpiUnit:e.unit,creatorType:"action",expected:e.expected,kpiAction:O.ZV.CREATED})}),Gt.forEach(function(e){t.kpis.push({kpiId:e.id,kpiUnit:e.unit,name:e.name,creatorType:"action",expected:e.expected,kpiAction:e.kpiAction})})),$e.length>0&&"create"===n&&(t.linkedProgrammes=[],$e.forEach(function(e){t.linkedProgrammes.push(e.programmeId)})),"create"!==n){e.n=2;break}return e.n=1,re("national/actions/add",t);case 1:i=e.v,e.n=4;break;case 2:if(!pe||"update"!==n){e.n=4;break}return t.actionId=pe,e.n=3,se("national/actions/update",t);case 3:i=e.v;case 4:r=$("create"===n?"actionCreationSuccess":"actionUpdateSuccess"),200!==i.status&&201!==i.status||p.Ay.open({type:"success",content:r,duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}),e.n=6;break;case 5:return e.p=5,c=e.v,(0,K.s)(c),e.n=6,new Promise(function(e){setTimeout(e,500)});case 6:return e.p=6,Ke(!1),ne("/actions"),e.f(6);case 7:return e.a(2)}},e,null,[[0,5,6,7]])}));return function(t){return e.apply(this,arguments)}}(),ln=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,n,a,i;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,Xe(!0),!pe){e.n=2;break}return t={entityId:pe,validateStatus:!xe},e.n=1,re("national/actions/validateStatus",t);case 1:200!==(n=e.v).status&&201!==n.status||(p.Ay.open({type:"success",content:$(xe?"actionUnvalidateSuccess":"actionValidateSuccess"),duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}),ne("/actions"));case 2:e.n=7;break;case 3:if(e.p=3,null===(a=e.v)||void 0===a||!a.status){e.n=6;break}if(403!==a.status){e.n=5;break}return i=me,e.n=4,(0,T.e)(ie);case 4:i(e.v);case 5:(0,K.s)(a),e.n=7;break;case 6:(0,K.s)(a,"".concat(pe," Validation Failed"));case 7:return e.p=7,Xe(!1),e.f(7);case 8:return e.a(2)}},e,null,[[0,3,7,8]])}));return function(){return e.apply(this,arguments)}}(),dn=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,n,a;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Ke(!0),e.n=1,(0,T.cb)(1e3);case 1:if(!pe){e.n=3;break}return t={entityId:pe},e.n=2,ce("national/actions/delete",t);case 2:200!==(n=e.v).status&&201!==n.status||(p.Ay.open({type:"success",content:$("actionDeleteSuccess"),duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}),ne("/actions"));case 3:e.n=5;break;case 4:e.p=4,null!==(a=e.v)&&void 0!==a&&a.message?(0,K.s)(a):(0,K.s)(a,"".concat(pe," Delete Failed"));case 5:return e.p=5,Ke(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),on=function(e,t){"new"===t?(Zt(Bt.filter(function(t){return t.index!==e})),"update"===n&&ze(!1)):(Wt(Gt.filter(function(t){return t.index!==e})),ze(!1));var a=(0,i.A)((0,i.A)((0,i.A)({},"kpi_name_".concat(e),void 0),"kpi_unit_".concat(e),void 0),"kpi_exp_".concat(e),void 0);J.setFieldsValue(a)},un=function(e,t,n,r){"new"===r?Zt(function(r){return r.map(function(r){return r.index===e?(0,a.A)((0,a.A)({},r),{},(0,i.A)({},t,"expected"===t?parseFloat(n):n)):r})}):Wt(function(r){return r.map(function(r){return r.index===e?(r.kpiAction=O.ZV.UPDATED,(0,a.A)((0,a.A)({},r),{},(0,i.A)({},t,"expected"===t?parseFloat(n):n))):r})})},mn=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,a,i,r,c,l,d,o,u,m,p,h,f;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===n||!pe){e.n=5;break}return e.p=1,e.n=2,ie("national/actions/".concat(pe));case 2:200!==(t=e.v).status&&201!==t.status||(h=t.data,J.setFieldsValue({title:h.title,description:h.description,objective:h.objective,type:h.type,sector:h.sector,instrumentType:h.instrumentType,status:h.status,startYear:h.startYear,natAnchor:h.natAnchor}),ve(null!==(a=h.validated)&&void 0!==a&&a),Pe((0,T.Mg)(h.type)),(null===(i=h.documents)||void 0===i?void 0:i.length)>0&&(f=[],h.documents.forEach(function(e){f.push({key:e.createdTime,title:e.title,url:e.url})}),Se(f)),J.setFieldsValue({ghgsAffected:null!==(r=null===(c=h.migratedData)||void 0===c?void 0:c.ghgsAffected)&&void 0!==r?r:[],natImplementor:null!==(l=null===(d=h.migratedData)||void 0===d?void 0:d.natImplementors)&&void 0!==l?l:[],estimatedInvestment:null!==(o=null===(u=h.migratedData)||void 0===u?void 0:u.financeNeeded)&&void 0!==o?o:0,achievedReduct:null===(m=h.migratedData)||void 0===m?void 0:m.achievedGHGReduction,expectedReduct:null===(p=h.migratedData)||void 0===p?void 0:p.expectedGHGReduction})),e.n=4;break;case 3:e.p=3,e.v,ne("/actions");case 4:ze(!0);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),pn=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,a,i,r;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===n||!pe){e.n=4;break}return e.p=1,e.n=2,ie("national/kpis/achieved/action/".concat(pe));case 2:200!==(t=e.v).status&&201!==t.status||(a=[],i=qt,t.data.forEach(function(e){var t,n;a.push({index:i,creator:pe,id:e.kpiId,name:e.name,unit:e.kpiUnit,achieved:parseFloat(null!==(t=e.achieved)&&void 0!==t?t:0),expected:parseFloat(null!==(n=e.expected)&&void 0!==n?n:0),kpiAction:O.ZV.NONE}),i+=1}),Ut(i),Wt(a),a.length>0&&Jt(!0)),e.n=4;break;case 3:e.p=3,r=e.v,console.log(r,$("kpiSearchFailed"));case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),hn=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,a,i,r;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===n){e.n=4;break}return e.p=1,t={filterAnd:[{key:"actionId",operation:"=",value:pe}],sort:{key:"programmeId",order:"ASC"}},e.n=2,re("national/programmes/query",t);case 2:a=e.v,i=[],a.data.forEach(function(e,t){var n,a,r,s,c,l,d,o,u,m,p,h,f,A;i.push({key:t.toString(),programmeId:e.programmeId,actionId:null===(n=e.action)||void 0===n?void 0:n.actionId,title:e.title,type:null===(a=e.action)||void 0===a?void 0:a.type,status:e.programmeStatus,subSectorsAffected:null!==(r=e.affectedSubSector)&&void 0!==r?r:[],estimatedInvestment:null!==(s=null===(c=e.migratedData[0])||void 0===c?void 0:c.estimatedAmount)&&void 0!==s?s:0,ghgsAffected:null!==(l=null===(d=e.migratedData[0])||void 0===d?void 0:d.ghgsAffected)&&void 0!==l?l:[],types:null!==(o=null===(u=e.migratedData[0])||void 0===u?void 0:u.types)&&void 0!==o?o:[],natImplementer:null!==(m=e.natImplementor)&&void 0!==m?m:[],achievedReduction:null!==(p=null===(h=e.migratedData[0])||void 0===h?void 0:h.achievedGHGReduction)&&void 0!==p?p:0,estimatedReduction:null!==(f=null===(A=e.migratedData[0])||void 0===A?void 0:A.expectedGHGReduction)&&void 0!==f?f:0})}),et(i),e.n=4;break;case 3:e.p=3,r=e.v,(0,K.s)(r);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),fn=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,a,i,r;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===n){e.n=4;break}return e.p=1,t={filterAnd:[{key:"parentId",operation:"=",value:pe},{key:"parentType",operation:"=",value:"action"}],sort:{key:"activityId",order:"ASC"}},e.n=2,re("national/activities/query",t);case 2:a=e.v,i=[],a.data.forEach(function(e,t){var n,a,r;i.push({key:t.toString(),activityId:e.activityId,title:e.title,reductionMeasures:e.measure,status:e.status,natImplementor:null!==(n=e.nationalImplementingEntity)&&void 0!==n?n:[],ghgsAffected:e.ghgsAffected,achievedReduction:null!==(a=e.achievedGHGReduction)&&void 0!==a?a:0,estimatedReduction:null!==(r=e.expectedGHGReduction)&&void 0!==r?r:0})}),mt(i),e.n=4;break;case 3:e.p=3,r=e.v,(0,K.s)(r);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),An=function(){var e=(0,c.A)((0,s.A)().m(function e(){var t,n,a,i;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t={filterOr:[],sort:{key:"supportId",order:"ASC"}},!(ut.length>0)){e.n=5;break}return e.p=1,ut.forEach(function(e){t.filterOr.push({key:"activityId",operation:"=",value:e.activityId})}),e.n=2,re("national/supports/query",t);case 2:n=e.v,a=[],n.data.forEach(function(e,t){var n,i,r,s;a.push({key:t.toString(),supportId:e.supportId,financeNature:e.financeNature,direction:e.direction,finInstrument:"International"===e.financeNature?e.internationalFinancialInstrument:e.nationalFinancialInstrument,estimatedUSD:(0,T.aE)(null!==(n=e.requiredAmount)&&void 0!==n?n:0),estimatedLC:(0,T.aE)(null!==(i=e.requiredAmountDomestic)&&void 0!==i?i:0),recievedUSD:(0,T.aE)(null!==(r=e.receivedAmount)&&void 0!==r?r:0),recievedLC:(0,T.aE)(null!==(s=e.receivedAmountDomestic)&&void 0!==s?s:0)})}),kt(a),e.n=4;break;case 3:e.p=3,i=e.v,(0,K.s)(i);case 4:e.n=6;break;case 5:kt([]);case 6:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return(0,y.useEffect)(function(){An()},[ut]),(0,y.useEffect)(function(){Promise.all([mn(),pn(),hn(),fn()]).then(function(){Oe(!0)})},[]),(0,_.jsxs)("div",{className:"content-container",children:[(0,_.jsx)(W.A,{icon:(0,_.jsx)(j.A,{style:{color:"#ff4d4f",fontSize:"120px"}}),isDanger:!0,content:{primaryMsg:"".concat($("deletePrimaryMsg")," ").concat(pe),secondaryMsg:$("deleteSecondaryMsg"),cancelTitle:$("entityAction:cancel"),actionTitle:$("entityAction:delete")},actionRef:pe,doAction:dn,open:Rt,setOpen:Et},"delete_popup"),(0,_.jsx)("div",{className:"title-bar",children:(0,_.jsx)("div",{className:"body-title",children:$(te)})}),(0,_.jsx)(m.A,{form:J,onFinish:cn,layout:"vertical",onValuesChange:function(){ze(!1)},children:!Le&&Me?(0,_.jsxs)("div",{className:"action-form",children:[(0,_.jsxs)("div",{className:"form-section-card",children:[(0,_.jsx)("div",{className:"form-section-header",children:$("generalInfoTitle")}),"create"!==n&&pe&&(0,_.jsx)(w.A,{calledIn:"Action",entId:pe,isValidated:xe}),(0,_.jsxs)(h.A,{gutter:Q,children:[(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:typeHeader")}),name:"type",rules:"create"===n?[he.required]:void 0,children:(0,_.jsx)(o.A,{size:"large",style:{fontSize:X},allowClear:!0,disabled:"create"!==n,showSearch:!0,onChange:function(e){return Pe((0,T.Mg)(e))},children:Object.values(I.X2).map(function(e){return(0,_.jsx)(B,{value:e,children:e},e)})})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("actionTitle")}),name:"title",rules:[he.required],children:(0,_.jsx)(u.A,{className:"form-input-box",disabled:ee})})}))]}),(0,_.jsxs)(h.A,{gutter:Q,children:[(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("actionDescTitle")}),name:"description",rules:[he.required],children:(0,_.jsx)(Z,{rows:3,disabled:ee})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("actionObjectivesTitle")}),name:"objective",rules:[he.required],children:(0,_.jsx)(Z,{rows:3,disabled:ee})})}))]}),(0,_.jsxs)(h.A,{gutter:Q,children:[(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:instrumentTypeHeader")}),name:"instrumentType",rules:[he.required],children:(0,_.jsx)(o.A,{size:"large",mode:"multiple",style:{fontSize:X},allowClear:!0,disabled:ee,showSearch:!0,children:Object.values(I.Oi).map(function(e){return(0,_.jsx)(B,{value:e,children:e},e)})})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("actionStatusTitle")}),name:"status",rules:[he.required],children:(0,_.jsx)(o.A,{size:"large",style:{fontSize:X},allowClear:!0,disabled:ee,showSearch:!0,children:Object.values(I.VI).map(function(e){return(0,_.jsx)(B,{value:e,children:e},e)})})})}))]}),(0,_.jsxs)(h.A,{gutter:Q,children:[(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:natImplementerHeader")}),name:"natImplementor",children:(0,_.jsx)(o.A,{size:"large",style:{fontSize:X},mode:"multiple",disabled:!0})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L._C),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:sectorsAffectedHeader")}),name:"sector",rules:[he.required],children:(0,_.jsx)(o.A,{size:"large",style:{fontSize:X},allowClear:!0,disabled:ee,showSearch:!0,children:$t.map(function(e){return(0,_.jsx)(B,{value:e,children:e},e)})})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L._C),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:startYearTitle")}),name:"startYear",rules:[he.required],children:(0,_.jsx)(o.A,{size:"large",style:{fontSize:X},allowClear:!0,disabled:ee,showSearch:!0,children:tn.map(function(e){return(0,_.jsx)(B,{value:e,children:e},e)})})})}))]}),(0,_.jsxs)(h.A,{gutter:Q,children:[(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:investmentNeedsHeader")}),name:"estimatedInvestment",children:(0,_.jsx)(u.A,{className:"form-input-box",disabled:!0})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:natAnchorTitle")}),name:"natAnchor",rules:[he.required],children:(0,_.jsx)(o.A,{size:"large",mode:"multiple",style:{fontSize:X},allowClear:!0,disabled:ee,showSearch:!0,children:Object.values(I.j1).map(function(e){return(0,_.jsx)(B,{value:e,children:e},e)})})})}))]}),(0,_.jsx)("div",{style:{color:"#3A3541",opacity:.8,marginTop:"10px",marginBottom:"10px"},children:$("formHeader:documentsHeader")}),(0,_.jsx)(S.A,{isSingleColumn:!1,usedIn:n,buttonText:$("entityAction:upload"),storedFiles:Ne,uploadedFiles:ye,setUploadedFiles:be,removedFiles:Ce,setRemovedFiles:He,setIsSaveButtonDisabled:ze})]}),"create"!==n&&$e.length>0&&(0,_.jsxs)("div",{className:"form-section-card",children:[(0,_.jsx)(h.A,{children:(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.Cm),{},{style:{paddingTop:"6px"},children:(0,_.jsx)("div",{className:"form-section-header",children:$("programInfoTitle")})}))}),(0,_.jsx)(h.A,{children:(0,_.jsx)(f.A,{span:24,children:(0,_.jsx)(b.A,{tableData:$e.slice((at-1)*ct,(at-1)*ct+ct),columns:an,loading:!1,pagination:{current:at,pageSize:ct,total:$e.length,showQuickJumper:!0,pageSizeOptions:["10","20","30"],showSizeChanger:!0,style:{textAlign:"center"},locale:{page:""},position:["bottomRight"]},handleTableChange:function(e){it(e.current),lt(e.pageSize)},emptyMessage:$("noProgramsMessage")})})})]}),"create"!==n&&ut.length>0&&(0,_.jsxs)("div",{className:"form-section-card",children:[(0,_.jsx)(h.A,{children:(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.Cm),{},{style:{paddingTop:"6px"},children:(0,_.jsx)("div",{className:"form-section-header",children:$("formHeader:activityInfoTitle")})}))}),(0,_.jsx)(h.A,{children:(0,_.jsx)(f.A,{span:24,children:(0,_.jsx)("div",{style:{overflowX:"auto"},children:(0,_.jsx)(b.A,{tableData:ut,columns:rn,loading:!1,pagination:{current:ft,pageSize:jt,total:ut.length,showQuickJumper:!0,pageSizeOptions:["10","20","30"],showSizeChanger:!0,style:{textAlign:"center"},locale:{page:""},position:["bottomRight"]},handleTableChange:function(e){At(e.current),gt(e.pageSize)},emptyMessage:$("formHeader:noActivityMessage")})})})})]}),"create"!==n&&It.length>0&&(0,_.jsxs)("div",{className:"form-section-card",children:[(0,_.jsx)(h.A,{children:(0,_.jsx)(f.A,{span:20,children:(0,_.jsx)("div",{className:"form-section-header",children:$("formHeader:supportInfoTitle")})})}),(0,_.jsx)(h.A,{children:(0,_.jsx)(f.A,{span:24,children:(0,_.jsx)(b.A,{tableData:It,columns:sn,loading:!1,pagination:{current:wt,pageSize:Dt,total:It.length,showQuickJumper:!0,pageSizeOptions:["10","20","30"],showSizeChanger:!0,style:{textAlign:"center"},locale:{page:""},position:["bottomRight"]},handleTableChange:function(e){Tt(e.current),Ft(e.pageSize)},emptyMessage:$("formHeader:noSupportMessage")})})})]}),(0,_.jsxs)("div",{className:"form-section-card",children:[(0,_.jsx)("div",{className:"form-section-header",children:$(Ve?"formHeader:actionResultsInfoTitle":"formHeader:kpiInfoTitle")}),Ve&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(h.A,{gutter:Q,children:(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:ghgAffected")}),name:"ghgsAffected",children:(0,_.jsx)(o.A,{size:"large",style:{fontSize:X},mode:"multiple",disabled:!0})})}))}),(0,_.jsx)("div",{className:"form-section-sub-header",children:$("formHeader:emissionInfoTitle")}),(0,_.jsxs)(h.A,{gutter:Q,children:[(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:achieved")}),name:"achievedReduct",children:(0,_.jsx)(u.A,{className:"form-input-box",disabled:!0})})})),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.FW),{},{children:(0,_.jsx)(m.A.Item,{label:(0,_.jsx)("label",{className:"form-item-header",children:$("formHeader:expected")}),name:"expectedReduct",children:(0,_.jsx)(u.A,{className:"form-input-box",disabled:!0})})}))]})]}),("create"===n||"update"===n||"view"===n&&Gt.length>0)&&Ve&&(0,_.jsx)("div",{className:"form-section-sub-header",children:$("formHeader:kpiInfoTitle")}),"view"===n&&Gt.map(function(e){return(0,_.jsx)(U.Q,{index:e.index,inherited:!1,headerNames:[$("formHeader:kpiName"),$("formHeader:kpiUnit"),$("formHeader:achieved"),$("formHeader:expected")],kpi:e,callingEntityId:pe,ownerEntityId:pe},e.index)}),"update"===n&&Gt.map(function(e){return(0,_.jsx)(M.R,{index:e.index,form:J,rules:[he.required],isFromActivity:!1,headerNames:[$("formHeader:kpiName"),$("formHeader:kpiUnit"),$("formHeader:achieved"),$("formHeader:expected")],kpi:e,updateKPI:un,removeKPI:on},e.index)}),Bt.map(function(e){return(0,_.jsx)(q.r,{form:J,rules:[he.required],index:e.index,headerNames:[$("formHeader:kpiName"),$("formHeader:kpiUnit"),$("formHeader:achieved"),$("formHeader:expected")],updateKPI:un,removeKPI:on},e.index)}),(0,_.jsx)(h.A,{justify:"start",children:(0,_.jsx)(f.A,{span:2,children:!ee&&(0,_.jsx)(A.A,{icon:(0,_.jsx)(g.A,{style:{color:"#3A3541"}}),className:"create-kpi-button",onClick:function(){var e={index:qt,name:"",unit:"",achieved:void 0,expected:0};Ut(function(e){return e+1}),Zt(function(t){return[].concat((0,r.A)(t),[e])}),Jt(!0),ze(!1)},children:(0,_.jsx)("span",{className:"kpi-add-text",children:$("entityAction:addKPI")})})})})]}),"create"!==n&&(0,_.jsxs)("div",{className:"form-section-timelineCard",children:[(0,_.jsx)("div",{className:"form-section-header",children:$("formHeader:updatesInfoTitle")}),(0,_.jsx)(E.A,{recordType:"action",recordId:pe})]}),"create"===n&&(0,_.jsxs)(h.A,{className:"sticky-footer",gutter:20,justify:"end",children:[(0,_.jsx)(f.A,{children:(0,_.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ne("/actions")},children:$("entityAction:cancel")})}),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.Cs),{},{children:(0,_.jsx)(m.A.Item,{children:(0,_.jsx)(A.A,{type:"primary",size:"large",block:!0,htmlType:"submit",children:$("entityAction:add")})})}))]}),"view"===n&&(0,_.jsxs)(h.A,{className:"sticky-footer",gutter:20,justify:"end",children:[(0,_.jsx)(f.A,{children:(0,_.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ne("/actions")},children:$("entityAction:back")})}),le.can(I.rc.Validate,R.i)&&(0,_.jsx)(f.A,{children:(0,_.jsx)(m.A.Item,{children:(0,_.jsx)(x.A,{placement:"topRight",title:ue?void 0:$("error:validationPermissionRequired"),showArrow:!1,children:(0,_.jsx)(A.A,{type:"primary",size:"large",block:!0,onClick:function(){ln()},loading:Qe,disabled:!ue,children:$(xe?"entityAction:unvalidate":"entityAction:validate")})})})})]}),"update"===n&&(0,_.jsxs)(h.A,{className:"sticky-footer",gutter:20,justify:"end",children:[(0,_.jsx)(f.A,{children:(0,_.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ne("/actions")},children:$("entityAction:cancel")})}),le.can(I.rc.Delete,R.i)&&(0,_.jsx)(f.A,{children:(0,_.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ut.length>0||$e.length>0?p.Ay.open({type:"error",content:$("error:actionDeletePrevented"),duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}):Et(!0)},style:{color:"red",borderColor:"red"},children:$("entityAction:delete")})}),(0,_.jsx)(f.A,(0,a.A)((0,a.A)({},L.Cs),{},{children:(0,_.jsx)(m.A.Item,{children:(0,_.jsx)(A.A,{type:"primary",size:"large",block:!0,htmlType:"submit",disabled:_e,children:$("entityAction:update")})})}))]})]}):(0,_.jsx)(v.A,{className:"loading-center",size:"large"})})]})}},1054:function(e,t,n){n.d(t,{F:function(){return i}});var a=n(454),i=function(e){return{required:{required:"view"!==e,message:"Required Field"},number:{pattern:/^[0-9]+$/,message:"Please enter a valid number"},greaterThanZero:function(e){return(0,a.A)(e),{validator:function(e,t){return t?t>0?Promise.resolve():Promise.reject("Need to be Greater than Zero"):Promise.resolve()}}}}}},6698:function(){}}]);
//# sourceMappingURL=853.76a61478.chunk.js.map