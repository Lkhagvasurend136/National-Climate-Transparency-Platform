"use strict";(self.webpackChunkweb_mrv=self.webpackChunkweb_mrv||[]).push([[663],{6770:function(e,t,a){a.d(t,{A:function(){return o}});var i=a(6237),n=a(7419),s=a(1645),r=a(5696),l=a(8387),c=a(579),o=function(e){var t=e.calledIn,a=e.entId,o=e.isValidated;return(0,c.jsx)(n.A,{children:(0,c.jsx)(s.A,{children:(0,c.jsx)(r.A,{title:o?"Validated ".concat(t):void 0,showArrow:!1,placement:"right",children:(0,c.jsx)(l.A,{icon:o?(0,c.jsx)(i.A,{style:{color:"#8A1538"}}):void 0,className:"entity-id-card",children:"".concat(t," ID: ").concat(a)})})})})}},1048:function(e,t,a){a.d(t,{R:function(){return d}});var i=a(6655),n=a(1645),s=a(289),r=a(3307),l=a(7419),c=(a(6698),a(1966)),o=a(579),d=function(e){var t=e.rules,a=e.index,d=e.headerNames,u=e.kpi,m=e.updateKPI,h=e.removeKPI,p=e.isFromActivity;return(0,o.jsxs)(l.A,{gutter:30,className:"kpi-grid",children:[(0,o.jsx)(n.A,{span:12,children:(0,o.jsxs)(l.A,{gutter:30,children:[(0,o.jsx)(n.A,{span:12,children:(0,o.jsx)(s.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:d[0]}),name:"kpi_name_".concat(a),rules:p?[]:t,initialValue:null===u||void 0===u?void 0:u.name,children:(0,o.jsx)(r.A,{className:"form-input-box",onChange:function(e){m&&m(a,"name",e.target.value,"created")},disabled:p})})}),(0,o.jsx)(n.A,{span:12,children:(0,o.jsx)(s.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:d[1]}),name:"kpi_unit_".concat(a),rules:p?[]:t,initialValue:null===u||void 0===u?void 0:u.unit,children:(0,o.jsx)(r.A,{className:"form-input-box",onChange:function(e){m&&m(a,"unit",e.target.value,"created")},disabled:p})})})]})}),(0,o.jsx)(n.A,{span:12,children:(0,o.jsxs)(l.A,{gutter:15,children:[(0,o.jsx)(n.A,{span:p?12:11,children:(0,o.jsx)(s.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:d[2]}),name:"kpi_ach_".concat(a),initialValue:null===u||void 0===u?void 0:u.achieved,rules:p?t:[],children:(0,o.jsx)(r.A,{type:"number",min:0,step:.01,className:"form-input-box",onChange:function(e){m&&m(a,"achieved",e.target.value,"created")},disabled:!p})})}),(0,o.jsx)(n.A,{span:p?12:11,children:(0,o.jsx)(s.A.Item,{label:(0,o.jsx)("label",{className:"form-item-header",children:d[3]}),name:"kpi_exp_".concat(a),rules:p?[]:t,initialValue:null===u||void 0===u?void 0:u.expected,children:(0,o.jsx)(r.A,{type:"number",min:0,step:.01,className:"form-input-box",onChange:function(e){m&&m(a,"expected",e.target.value,"created")},disabled:p})})}),!p&&(0,o.jsx)(n.A,{span:2,children:(0,o.jsx)(i.A,{className:"delete-card",children:(0,o.jsx)(c.A,{style:{cursor:"pointer",color:"#3A3541",opacity:.8},onClick:function(){h&&h(a,"created")}})})})]})})]},a)}},2613:function(e,t,a){a.d(t,{Q:function(){return u}});var i=a(1645),n=a(289),s=a(3307),r=a(7419),l=a(5696),c=(a(6698),a(3722)),o=a(716),d=a(579),u=function(e){var t=e.index,a=e.inherited,u=e.headerNames,m=e.kpi,h=e.callingEntityId,p=e.ownerEntityId;return(0,d.jsxs)(r.A,{gutter:30,className:"kpi-grid",children:[(0,d.jsx)(i.A,{span:12,children:(0,d.jsxs)(r.A,{gutter:30,children:[(0,d.jsx)(i.A,{span:12,children:(0,d.jsx)(n.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:u[0]}),name:"kpi_name_".concat(t),initialValue:null===m||void 0===m?void 0:m.name,children:(0,d.jsx)(s.A,{className:"form-input-box",disabled:!0})})}),(0,d.jsx)(i.A,{span:12,children:(0,d.jsx)(n.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:u[1]}),name:"kpi_unit_".concat(t),initialValue:null===m||void 0===m?void 0:m.unit,children:(0,d.jsx)(s.A,{className:"form-input-box",disabled:!0})})})]})}),(0,d.jsx)(i.A,{span:12,children:(0,d.jsxs)(r.A,{gutter:15,children:[(0,d.jsx)(i.A,{span:11,children:(0,d.jsx)(n.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:u[2]}),name:"kpi_ach_".concat(t),initialValue:null===m||void 0===m?void 0:m.achieved,children:(0,d.jsx)(s.A,{type:"number",className:"form-input-box",disabled:!0})})}),(0,d.jsx)(i.A,{span:11,children:(0,d.jsx)(n.A.Item,{label:(0,d.jsx)("label",{className:"form-item-header",children:u[3]}),name:"kpi_exp_".concat(t),initialValue:null===m||void 0===m?void 0:m.expected,children:(0,d.jsx)(s.A,{type:"number",className:"form-input-box",disabled:!0})})}),(0,d.jsx)(i.A,{span:2,children:(0,d.jsx)(l.A,{placement:"topLeft",title:a?"Inherited from ".concat(p):"Owned by ".concat(h),showArrow:!1,children:a?(0,d.jsx)(o.A,{className:"inherited-kpi"}):(0,d.jsx)(c.A,{className:"self-owned-kpi"})})})]})})]},t)}},9190:function(e,t,a){a.d(t,{A:function(){return j}});var i=a(2007),n=a(467),s=a(5544),r=a(460),l=a(3835),c=a(5043),o=a(2856),d=a(4117),u=a(318),m=a(2413),h=a(3627),p=a(4853),f=a(7589),A=a(8572),v=a(5432),x=a(8417),g=a(579),j=function(e){var t=e.recordType,a=e.recordId,j=(0,o.w5)().post,b=(0,d.Bd)(["updateTimeline"]).t,y=(0,c.useState)(!1),I=(0,s.A)(y,2),S=I[0],E=I[1],k=(0,c.useState)([]),N=(0,s.A)(k,2),w=N[0],T=N[1],C=function(){var e=(0,n.A)((0,i.A)().m(function e(){var n,s,r;return(0,i.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return E(!0),e.p=1,n={recordType:t,recordId:a},e.n=2,j("national/log/query",n);case 2:(s=e.v)&&T(s.data),e.n=4;break;case 3:e.p=3,r=e.v,(0,x.s)(r);case 4:return e.p=4,E(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)(function(){C()},[]);var F=function(e){switch(e){case"0":case"5":case"8":case"12":case"22":return(0,g.jsx)("span",{className:"step-icon created-step",children:(0,g.jsx)(u.A,{})});case"3":case"6":case"9":case"10":case"13":case"14":case"23":case"24":return(0,g.jsx)("span",{className:"step-icon link-step",children:(0,g.jsx)(m.A,{})});case"7":case"11":case"15":case"27":return(0,g.jsx)("span",{className:"step-icon unlink-step",children:(0,g.jsx)(m.A,{})});case"1":return(0,g.jsx)("span",{className:"step-icon addkpi-step",children:(0,g.jsx)(h.A,{})});case"18":case"19":case"21":case"25":case"28":return(0,g.jsx)("span",{className:"step-icon verify-step",children:(0,g.jsx)(p.A,{})});case"30":case"31":case"32":case"33":case"34":case"35":case"36":case"37":case"38":case"39":case"40":case"41":case"42":case"43":case"44":case"45":case"46":case"47":case"48":case"49":case"50":case"51":case"52":case"53":case"54":return(0,g.jsx)("span",{className:"step-icon unverify-step",children:(0,g.jsx)(f.A,{})});default:return(0,g.jsx)("span",{className:"step-icon default-step",children:(0,g.jsx)(A.A,{})})}},R=w.map(function(e,t){return{key:t,title:(0,g.jsxs)("span",{children:[(0,g.jsxs)("strong",{children:[null===e.user_id?"System":e.user_name," "]})," ",b(e.eventType)," ",e.logData&&" - ".concat(e.logData),(0,g.jsxs)("span",{className:"date",children:[" - ","".concat((0,v.n5)(Number(e.createdTime)))]})]}),icon:F(e.eventType),status:"process"}});return(0,g.jsx)("div",{className:"info-view",children:(0,g.jsx)("div",{className:"content",children:S?(0,g.jsx)(r.A,{}):(0,g.jsx)(l.A,{direction:"vertical",current:0,items:R})})})}},6499:function(e,t,a){a.d(t,{r:function(){return s}});var i=a(4117),n=a(579),s=function(){var e=(0,i.Bd)(["formTable"]).t;return[{title:e("supportIdTitle"),dataIndex:"supportId",key:"supportId",render:function(e,t){return(0,n.jsx)("a",{href:"/support/view/".concat(t.supportId),children:t.supportId})}},{title:e("financeNatureTitle"),dataIndex:"financeNature",key:"financeNature"},{title:e("directionTitle"),dataIndex:"direction",key:"direction"},{title:e("finInstrumentTitle"),dataIndex:"finInstrument",key:"finInstrument"},{title:e("neededUSDHeader"),dataIndex:"estimatedUSD",key:"estimatedUSD"},{title:e("neededLCLHeader"),dataIndex:"estimatedLC",key:"estimatedLC"},{title:e("recievedUSDHeader"),dataIndex:"recievedUSD",key:"recievedUSD"},{title:e("recievedLCLHeader"),dataIndex:"recievedLC",key:"recievedLC"}]}},3203:function(e,t,a){a.d(t,{s:function(){return i}});var i=function(e){return e["1A1"]="1A1 Energy Industries",e["1A2"]="1A2 Manufacturing Industries and Construction",e["1A3a"]="1A3a Civil Aviation",e["1A3b"]="1A3b Road Transportation",e["1A3c"]="1A3c Railways",e["1A3d"]="1A3d Water-borne Navigation",e["1A3e"]="1A3e Other Transportation",e["1A4"]="1A4 Other Sectors",e["1A5"]="1A5 Non-Specified",e["1B1"]="1B1 Solid Fuels",e["1B2"]="1B2 Oil and Natural Gas",e["1B3"]="1B3 Other Emissions from Energy Production",e["1C1"]="1C1 Transport of CO2",e["1C2"]="1C2 Injections and Storage",e["1C3"]="1C3 Other",e["2A"]="2A Mineral Industry",e["2B"]="2B Chemical Industry",e["2C"]="2C Metal Industry",e["2D"]="2D Non-Energy Products from Fuels and Solvent Use",e["2E"]="2E Electronics Industry",e["2F"]="2F Product Uses as Substitutes for Ozone Depleting Substances",e["2G"]="2G Other Product Manufacture and Use",e["2H"]="2H Other",e["3A1"]="3A1 Enteric Fermentation",e["3A2"]="3A2 Manure Management",e["3B1"]="3B1 Forest Land",e["3B2"]="3B2 Cropland",e["3B3"]="3B3 Grassland",e["3B4"]="3B4 Wetlands",e["3B5"]="3B5 Settlements",e["3B6"]="3B6 Other Land",e["3C"]="3C Aggregate Sources and Non-CO2 Emissions Sources on Land",e["3D"]="3D Other",e["4A"]="4A Solid Waste Disposal",e["4B"]="4B Biological Treatment of Solid Waste",e["4C"]="4C Incineration and Open Burning of Waste",e["4D"]="4D Wastewater Treatment and Discharge",e["4E"]="4E Other",e["5A"]="5A Indirect N2O Emissions from the Atmospheric Deposition of Nitrogen in Nox and NH3",e["5B"]="5B Other",e}({})},1663:function(e,t,a){a.r(t),a.d(t,{default:function(){return ie}});var i=a(4467),n=a(9379),s=a(2007),r=a(467),l=a(5544),c=a(4117),o=a(4406),d=a(3307),u=a(289),m=a(8193),h=a(7419),p=a(1645),f=a(8186),A=a(9421),v=a(5696),x=a(5397),g=a(5043),j=a(8228),b=a(3216),y=a(4241),I=a(2856),S=function(e){return e.ACTION="action",e.PROGRAMME="programme",e.PROJECT="project",e}({}),E=a(8205),k=a(3428),N=a(5462),w={ROW_ONE:["ktCO2","Baseline Emissions (without measures)"],ROW_TWO:["ktCO2","Activity Emissions (with measures)"],ROW_THREE:["ktCO2","Activity Emissions (with additional measures)"],ROW_FOUR:["ktCO2e","Expected Emission Reductions (with measures)"],ROW_FIVE:["ktCO2e","Expected Emission Reductions (with additional measures)"]},T={ROW_ONE:["ktCO2","Baseline Actual Emissions"],ROW_TWO:["ktCO2","Activity Actual Emissions"],ROW_THREE:["ktCO2e","Actual Equivalent Emission Reductions"]},C=a(579),F=E.Ay.useBreakpoint,R=function(e){var t=e.expectedTimeline,a=e.actualTimeline,i=e.loading,n=e.method,s=e.mtgStartYear,r=e.mtgRange,c=e.onValueEnter,o=e.t,d=F(),u="view"===n,m=(0,g.useState)(!1),h=(0,l.A)(m,2),p=h[0],f=h[1];(0,g.useEffect)(function(){d.xxl||d.xl?f(!0):f(!1)},[d]);for(var A=[{title:o("timelineTable:ghg"),dataIndex:"ghg",align:"center",ellipsis:!0,width:100},{title:o("timelineTable:catExpectedEmissionReduct"),dataIndex:"topic",align:"left",width:350,fixed:p?"left":void 0},{title:o("timelineTable:total"),dataIndex:"total",align:"center",width:100,render:function(e){return e}}],v=[{title:o("timelineTable:ghg"),dataIndex:"ghg",align:"center",ellipsis:!0,width:100},{title:o("timelineTable:catActualEmissionReduct"),dataIndex:"topic",align:"left",width:350,fixed:p?"left":void 0},{title:o("timelineTable:total"),dataIndex:"total",align:"center",width:100,render:function(e){return e}}],x=function(e){A.push({title:e.toString(),dataIndex:"values",width:120,align:"center",render:function(t,a){var i=a.topic===w.ROW_FOUR[1]||a.topic===w.ROW_FIVE[1]||u;return(0,C.jsx)(k.A,{disabled:i,value:t[e-s],decimalSeparator:".",controls:!1,style:{width:"100%",height:"30px"},onChange:function(t){c("expected",a.topic,e.toString(),t)}})}}),v.push({title:e.toString(),dataIndex:"values",width:120,align:"center",render:function(t,a){var i=a.topic===T.ROW_THREE[1]||u;return(0,C.jsx)(k.A,{disabled:i,value:t[e-s],decimalSeparator:".",controls:!1,style:{width:"100%",height:"30px"},onChange:function(t){c("actual",a.topic,e.toString(),t)}})}})},j=s;j<=Math.min(s+r,2050);j++)x(j);return(0,C.jsxs)("div",{className:"mtg-timeline",children:[(0,C.jsx)(N.A,{dataSource:t,columns:A,loading:i,pagination:!1,className:"custom-scroll-table"}),(0,C.jsx)(N.A,{dataSource:a,columns:v,loading:i,pagination:!1,className:"custom-scroll-table"})]})},W=a(3827),O=a(5515),H=a(6770),D=a(1054),G=a(5432),M=a(1186),z=a(3159),_=a(6240),V=a(6499),B=a(9190),P=a(2613),Y=a(1048),U=a(8255),q=a(9620),L=a(8417),Z=a(1713),J=a(9662),K=a(1966),$=a(3203),Q=o.A.Option,X=d.A.TextArea,ee=30,te="13px",ae=(new Date).getFullYear(),ie=function(e){for(var t=e.method,a=u.A.useForm(),E=(0,l.A)(a,1)[0],k=(0,c.Bd)(["activityForm","formHeader","entityAction","error","timelineTable"]).t,N="view"===t,F=(0,G.$T)("Activity",t),ie=(0,b.Zp)(),ne=(0,I.w5)(),se=ne.get,re=ne.post,le=ne.put,ce=ne.delete,oe=(0,_.V8)(),de=(0,Z.ur)(),ue=de.isValidationAllowed,me=de.setIsValidationAllowed,he=(0,b.g)().entId,pe=(0,D.F)(t),fe=[],Ae=2013;Ae<=2050;Ae++)fe.push(Ae);var ve=(0,g.useState)(!1),xe=(0,l.A)(ve,2),ge=xe[0],je=xe[1],be=(0,g.useState)(),ye=(0,l.A)(be,2),Ie=ye[0],Se=ye[1],Ee=(0,g.useState)(),ke=(0,l.A)(Ee,2),Ne=ke[0],we=ke[1],Te=(0,g.useState)([]),Ce=(0,l.A)(Te,2),Fe=Ce[0],Re=Ce[1],We=(0,g.useState)(),Oe=(0,l.A)(We,2),He=Oe[0],De=Oe[1],Ge=(0,g.useState)([]),Me=(0,l.A)(Ge,2),ze=Me[0],_e=Me[1],Ve=(0,g.useState)([]),Be=(0,l.A)(Ve,2),Pe=Be[0],Ye=Be[1],Ue=(0,g.useState)([]),qe=(0,l.A)(Ue,2),Le=qe[0],Ze=qe[1],Je=(0,g.useState)(!0),Ke=(0,l.A)(Je,2),$e=Ke[0],Qe=Ke[1],Xe=(0,g.useState)(!1),et=(0,l.A)(Xe,2),tt=et[0],at=et[1],it=(0,g.useState)(!1),nt=(0,l.A)(it,2),st=nt[0],rt=nt[1],lt=(0,g.useState)(!1),ct=(0,l.A)(lt,2),ot=ct[0],dt=ct[1],ut=(0,g.useState)(!1),mt=(0,l.A)(ut,2),ht=mt[0],pt=mt[1],ft=(0,g.useState)([]),At=(0,l.A)(ft,2),vt=At[0],xt=At[1],gt=(0,g.useState)([]),jt=(0,l.A)(gt,2),bt=jt[0],yt=jt[1],It=(0,g.useState)([]),St=(0,l.A)(It,2),Et=St[0],kt=St[1],Nt=(0,g.useState)([]),wt=(0,l.A)(Nt,2),Tt=wt[0],Ct=wt[1],Ft=(0,g.useState)([]),Rt=(0,l.A)(Ft,2),Wt=Rt[0],Ot=Rt[1],Ht=(0,g.useState)([]),Dt=(0,l.A)(Ht,2),Gt=Dt[0],Mt=Dt[1],zt=(0,g.useState)([]),_t=(0,l.A)(zt,2),Vt=_t[0],Bt=_t[1],Pt=(0,g.useState)(1),Yt=(0,l.A)(Pt,2),Ut=Yt[0],qt=Yt[1],Lt=(0,g.useState)(10),Zt=(0,l.A)(Lt,2),Jt=Zt[0],Kt=Zt[1],$t=(0,g.useState)(!1),Qt=(0,l.A)($t,2),Xt=Qt[0],ea=Qt[1],ta=(0,g.useState)(0),aa=(0,l.A)(ta,2),ia=aa[0],na=aa[1],sa=(0,g.useState)([]),ra=(0,l.A)(sa,2),la=ra[0],ca=ra[1],oa=(0,g.useState)(!1),da=(0,l.A)(oa,2),ua=da[0],ma=da[1],ha=(0,g.useState)([]),pa=(0,l.A)(ha,2),fa=pa[0],Aa=pa[1],va=(0,g.useState)([]),xa=(0,l.A)(va,2),ga=xa[0],ja=xa[1],ba=(0,g.useState)(0),ya=(0,l.A)(ba,2),Ia=ya[0],Sa=ya[1],Ea=(0,g.useState)(),ka=(0,l.A)(Ea,2),Na=ka[0],wa=ka[1],Ta=(0,g.useState)(!1),Ca=(0,l.A)(Ta,2),Fa=Ca[0],Ra=Ca[1],Wa=(0,g.useState)(),Oa=(0,l.A)(Wa,2),Ha=Oa[0],Da=Oa[1],Ga=(0,g.useState)(),Ma=(0,l.A)(Ga,2),za=Ma[0],_a=Ma[1],Va=(0,g.useState)(),Ba=(0,l.A)(Va,2),Pa=Ba[0],Ya=Ba[1],Ua=(0,g.useState)(!1),qa=(0,l.A)(Ua,2),La=qa[0],Za=qa[1],Ja=function(){at(!1),wa(void 0),Aa([]),ja([]),E.setFieldsValue({measure:void 0,ghgsAffected:void 0,achievedGHGReduction:void 0,expectedGHGReduction:void 0})},Ka=function(){var e=(0,r.A)((0,s.A)().m(function e(){var t,a;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,se("national/settings/GWP");case 1:200!==(t=e.v).status&&201!==t.status||Da({CH4:t.data.gwp_ch4,N2O:t.data.gwp_n2o}),e.n=3;break;case 2:e.p=2,a=e.v,console.log("Error fetching GWP values:",a);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),$a=function(){var e=(0,r.A)((0,s.A)().m(function e(t){var a,i;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(la.length>0&&t)){e.n=4;break}if(a=[],la.forEach(function(){var e=(0,r.A)((0,s.A)().m(function e(i){return(0,s.A)().w(function(e){for(;;)switch(e.n){case 0:i.achieved>0&&a.push({kpiId:i.id,activityId:t,achieved:i.achieved});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),!(a.length>0)){e.n=4;break}return e.p=1,e.n=2,re("national/kpis/achievements/add",{achievements:a});case 2:e.n=4;break;case 3:e.p=3,i=e.v,(0,L.s)(i);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),Qa=function(){var e=(0,r.A)((0,s.A)().m(function e(){var t,a,i,n;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,pt(!0),!he){e.n=2;break}return t={entityId:he,validateStatus:!ge},e.n=1,re("national/activities/validateStatus",t);case 1:200!==(a=e.v).status&&201!==a.status||(m.Ay.open({type:"success",content:k(ge?"activityUnvalidateSuccess":"activityValidateSuccess"),duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}),ie("/activities"));case 2:e.n=7;break;case 3:if(e.p=3,null===(i=e.v)||void 0===i||!i.status){e.n=6;break}if(403!==i.status){e.n=5;break}return n=me,e.n=4,(0,G.e)(se);case 4:n(e.v);case 5:(0,L.s)(i),e.n=7;break;case 6:(0,L.s)(i,"".concat(he," Validation Failed"));case 7:return e.p=7,pt(!1),e.f(7);case 8:return e.a(2)}},e,null,[[0,3,7,8]])}));return function(){return e.apply(this,arguments)}}(),Xa=function(){var e=(0,r.A)((0,s.A)().m(function e(){var t,a,i;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,dt(!0),e.n=1,(0,G.cb)(1e3);case 1:if(!he){e.n=3;break}return t={entityId:he},e.n=2,ce("national/activities/delete",t);case 2:200!==(a=e.v).status&&201!==a.status||(m.Ay.open({type:"success",content:k("activityDeleteSuccess"),duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}),ie("/activities"));case 3:e.n=5;break;case 4:e.p=4,null!==(i=e.v)&&void 0!==i&&i.message?(0,L.s)(i):(0,L.s)(i,"".concat(he," Delete Failed"));case 5:return e.p=5,dt(!1),e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),ei=function(e,t,a,s){ca(function(s){return s.map(function(s){return s.index===e?(0,n.A)((0,n.A)({},s),{},(0,i.A)({},t,parseFloat(a))):s})})},ti=(0,V.r)(),ai=function(){Qe(!1)},ii=function(e){switch(e){case"Baseline Emissions (without measures)":return"baselineEmissions";case"Activity Emissions (with measures)":return"activityEmissionsWithM";case"Activity Emissions (with additional measures)":return"activityEmissionsWithAM";case"Expected Emission Reductions (with measures)":return"expectedEmissionReductWithM";case"Expected Emission Reductions (with additional measures)":return"expectedEmissionReductWithAM";case"Baseline Actual Emissions":return"baselineActualEmissions";case"Activity Actual Emissions":return"activityActualEmissions";case"Actual Equivalent Emission Reductions":return"actualEmissionReduct";default:return""}},ni=function(){var e,t;switch(Na){case O.Wg.CH:return null!==(e=null===Ha||void 0===Ha?void 0:Ha.CH4)&&void 0!==e?e:1;case O.Wg.NO:return null!==(t=null===Ha||void 0===Ha?void 0:Ha.N2O)&&void 0!==t?t:1;default:return 1}},si=function(e){return e&&[O.Wg.CO,O.Wg.CH,O.Wg.NO].includes(e)?e:O.Wg.COE},ri=function(){if(Ia&&Na){var e=Ia+30,t=si(Na),a=[],i=[];Object.entries(w).forEach(function(i){var n=(0,l.A)(i,2),s=n[0],r=n[1],c={key:s,ghg:"ROW_ONE"===s||"ROW_TWO"===s||"ROW_THREE"===s?"kt".concat(t):r[0],topic:r[1],total:0,values:new Array(Math.min(e,2050)+1-Ia).fill(0)};a.push(c)}),Object.entries(T).forEach(function(a){var n=(0,l.A)(a,2),s=n[0],r=n[1],c={key:s,ghg:"ROW_ONE"===s||"ROW_TWO"===s?"kt".concat(t):r[0],topic:r[1],total:0,values:new Array(Math.min(e,2050)+1-Ia).fill(0)};i.push(c)}),Aa(a),ja(i)}},li=function(){var e=(0,r.A)((0,s.A)().m(function e(){var a,i,n,r,c;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===t||!he||!Na){e.n=4;break}return e.p=1,e.n=2,se("national/activities/mitigation/".concat(he));case 2:200===(a=e.v).status||201===a.status?(Sa(a.data.startYear),i=si(Na),n=[],r=[],Object.entries(w).forEach(function(e){var t=(0,l.A)(e,2),s=t[0],r=t[1],c={key:s,ghg:"ROW_ONE"===s||"ROW_TWO"===s||"ROW_THREE"===s?"kt".concat(i):r[0],topic:r[1],total:a.data.expected.total[ii(r[1])],values:a.data.expected[ii(r[1])]};n.push(c)}),Object.entries(T).forEach(function(e){var t=(0,l.A)(e,2),n=t[0],s=t[1],c={key:n,ghg:"ROW_ONE"===n||"ROW_TWO"===n?"kt".concat(i):s[0],topic:s[1],total:a.data.actual.total[ii(s[1])],values:a.data.actual[ii(s[1])]};r.push(c)}),Aa(n),ja(r)):ri(),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Error fetching timeline data:",c),ri();case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),ci=function(){var e=(0,r.A)((0,s.A)().m(function e(){var t,a,i;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!he){e.n=2;break}return t={activityId:he,mitigationTimeline:{expected:{baselineEmissions:fa[0].values,activityEmissionsWithM:fa[1].values,activityEmissionsWithAM:fa[2].values,expectedEmissionReductWithM:fa[3].values,expectedEmissionReductWithAM:fa[4].values,total:{baselineEmissions:fa[0].total,activityEmissionsWithM:fa[1].total,activityEmissionsWithAM:fa[2].total,expectedEmissionReductWithM:fa[3].total,expectedEmissionReductWithAM:fa[4].total}},actual:{baselineActualEmissions:ga[0].values,activityActualEmissions:ga[1].values,actualEmissionReduct:ga[2].values,total:{baselineActualEmissions:ga[0].total,activityActualEmissions:ga[1].total,actualEmissionReduct:ga[2].total}}},achievedGHGReduction:parseFloat(E.getFieldValue("achievedGHGReduction")),expectedGHGReduction:parseFloat(E.getFieldValue("expectedGHGReduction"))},e.n=1,le("national/activities/mitigation/update",t);case 1:200!==(a=e.v).status&&201!==a.status||(m.Ay.open({type:"success",content:k("mtgUpdateSuccess"),duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}}),Ra(!1));case 2:e.n=4;break;case 3:e.p=3,i=e.v,(0,L.s)(i,"".concat(he," Mitigation Timeline Failed to Update"));case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),oi=function(){var e=(0,r.A)((0,s.A)().m(function e(a){var i,n,r,l;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("update"!==t||!Fa){e.n=1;break}return(0,L.s)("",k("saveMtgFirst")),e.a(2);case 1:for(i in e.p=1,dt(!0),a)(i.startsWith("kpi_exp")||i.startsWith("kpi_unit"))&&delete a[i];if(ze.length>0&&("create"===t?(a.documents=[],ze.forEach(function(e){a.documents.push({title:e.title,data:e.data})})):"update"===t&&(a.newDocuments=[],ze.forEach(function(e){a.newDocuments.push({title:e.title,data:e.data})}))),Le.length>0&&(a.removedDocuments=[],Le.forEach(function(e){var t;a.removedDocuments.push(null===(t=Pe.find(function(t){return t.key===e}))||void 0===t?void 0:t.url)})),a.parentId||(a.parentId=""),a.startYear=parseInt(a.startYear1),a.endYear=parseInt(a.endYear1),a.expectedTimeFrame=parseInt(a.expectedTimeFrame),a.achievedGHGReduction=parseFloat(a.achievedGHGReduction),a.expectedGHGReduction=parseFloat(a.expectedGHGReduction),a.mitigationInfo={mitigationMethodology:a.mtgMethodName,mitigationMethodologyDescription:a.mtgMethodDesc,mitigationCalcEntity:a.mtgCalculateEntity,comments:a.mtgComments,methodologyDocuments:[],resultDocuments:[]},"create"===t&&Na&&(a.mitigationTimeline={expected:{baselineEmissions:fa[0].values,activityEmissionsWithM:fa[1].values,activityEmissionsWithAM:fa[2].values,expectedEmissionReductWithM:fa[3].values,expectedEmissionReductWithAM:fa[4].values,total:{baselineEmissions:fa[0].total,activityEmissionsWithM:fa[1].total,activityEmissionsWithAM:fa[2].total,expectedEmissionReductWithM:fa[3].total,expectedEmissionReductWithAM:fa[4].total}},actual:{baselineActualEmissions:ga[0].values,activityActualEmissions:ga[1].values,actualEmissionReduct:ga[2].values,total:{baselineActualEmissions:ga[0].total,activityActualEmissions:ga[1].total,actualEmissionReduct:ga[2].total}},startYear:Ia,unit:[O.Wg.CH,O.Wg.NO].includes(Na)?Na:O.Wg.CO}),"create"===t?(vt.forEach(function(e){a.mitigationInfo.methodologyDocuments.push({title:e.title,data:e.data})}),Tt.forEach(function(e){a.mitigationInfo.resultDocuments.push({title:e.title,data:e.data})})):"update"===t&&(bt.forEach(function(e){Et.includes(e.key)||a.mitigationInfo.methodologyDocuments.push({createdTime:e.key,title:e.title,url:e.url})}),vt.forEach(function(e){a.mitigationInfo.methodologyDocuments.push({title:e.title,data:e.data})}),Wt.forEach(function(e){Gt.includes(e.key)||a.mitigationInfo.resultDocuments.push({createdTime:e.key,title:e.title,url:e.url})}),Tt.forEach(function(e){a.mitigationInfo.resultDocuments.push({title:e.title,data:e.data})})),"create"!==t){e.n=3;break}return e.n=2,re("national/activities/add",(0,U.x)(a,"activity"));case 2:n=e.v,$a(n.data.activityId),e.n=5;break;case 3:if("update"!==t){e.n=5;break}return a.activityId=he,e.n=4,le("national/activities/update",(0,U.x)(a,"activity"));case 4:n=e.v,$a(he);case 5:if(r=k("create"===t?"activityCreationSuccess":"activityUpdateSuccess"),200!==n.status&&201!==n.status){e.n=7;break}return e.n=6,new Promise(function(e){setTimeout(e,500)});case 6:m.Ay.open({type:"success",content:r,duration:3,style:{textAlign:"right",marginRight:15,marginTop:10}});case 7:e.n=9;break;case 8:e.p=8,l=e.v,(0,L.s)(l);case 9:return e.p=9,dt(!1),ie("/activities"),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}));return function(t){return e.apply(this,arguments)}}(),di=function(){var e=(0,r.A)((0,s.A)().m(function e(){var t,a,i,n,r,l,c,o,d,u;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t={description:void 0,type:void 0,affSectors:void 0,affSubSectors:void 0},"action"!==Ie&&"programme"!==Ie&&"project"!==Ie||!Ne){e.n=6;break}return e.p=1,e.n=2,se("national/".concat(Ie,"s/").concat(Ne));case 2:a=e.v,"action"===Ie?(t.description=a.data.description,t.affSectors=null!==(i=a.data.sector)&&void 0!==i?i:void 0,t.type=a.data.type):"programme"===Ie?(t.description=a.data.description,t.affSectors=null!==(n=a.data.sector)&&void 0!==n?n:void 0,t.affSubSectors=a.data.affectedSubSector,t.type=a.data.type):(t.description=a.data.description,t.affSectors=null!==(r=a.data.sector)&&void 0!==r?r:void 0,t.affSubSectors=null!==(l=null===(c=a.data.programme)||void 0===c?void 0:c.affectedSubSector)&&void 0!==l?l:[],t.type=null===(o=a.data.programme)||void 0===o||null===(d=o.action)||void 0===d?void 0:d.type),e.n=4;break;case 3:e.p=3,u=e.v,(0,L.s)(u);case 4:return e.p=4,at((0,G.Mg)(t.type)),e.f(4);case 5:e.n=7;break;case 6:at(!1);case 7:De(t);case 8:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),ui=function(){var e=(0,r.A)((0,s.A)().m(function e(){var a,i,n,r;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("undefined"!==typeof Ne){e.n=1;break}ca([]),e.n=5;break;case 1:if(!("view"!==t&&Ie&&Ne&&ua)){e.n=5;break}return e.p=2,e.n=3,se("national/kpis/entities/".concat(Ie,"/").concat(Ne));case 3:200!==(a=e.v).status&&201!==a.status||(i=[],n=ia,a.data.forEach(function(e){var t;i.push({index:n,creator:e.creatorId,id:e.kpiId,name:e.name,unit:e.kpiUnit,achieved:0,expected:parseFloat(null!==(t=e.expected)&&void 0!==t?t:0),kpiAction:O.ZV.NONE}),n+=1}),na(n),ca(i)),e.n=5;break;case 4:e.p=4,r=e.v,console.log(r,k("kpiSearchFailed"));case 5:return e.a(2)}},e,null,[[2,4]])}));return function(){return e.apply(this,arguments)}}(),mi=function(){var e=(0,r.A)((0,s.A)().m(function e(){var t,a,i,n;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("action"!==Ie&&"programme"!==Ie&&"project"!==Ie){e.n=7;break}if(e.p=1,t={sort:{key:"".concat(Ie,"Id"),order:"ASC"}},"action"===Ie){e.n=3;break}return e.n=2,re("national/".concat(Ie,"s/query"),t);case 2:a=e.v,e.n=5;break;case 3:return e.n=4,se("national/actions/attach/query");case 4:a=e.v;case 5:i=[],a.data.forEach(function(e){var t;i.push({id:"action"===Ie?e.actionId:"programme"===Ie?e.programmeId:e.projectId,title:e.title,hasChildProgrammes:null!==(t=e.hasChildProgrammes)&&void 0!==t&&t})}),Re(i),e.n=7;break;case 6:e.p=6,n=e.v,(0,L.s)(n);case 7:return e.a(2)}},e,null,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),hi=function(){var e=(0,r.A)((0,s.A)().m(function e(){var a,i,n,r,l,c,o,d,u,m,h,p,f,A,v,x,g,j,b,y,I,S,k,N,w,T,C,F,R,W,O,H,D,G,M,z,_,V,B;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===t||!he){e.n=5;break}return e.p=1,e.n=2,se("national/activities/".concat(he));case 2:200!==(a=e.v).status&&201!==a.status||(H=a.data,E.setFieldsValue({title:H.title,description:H.description,status:H.status,measure:null!==(i=H.measure)&&void 0!==i?i:void 0,nationalImplementingEntity:null!==(n=H.nationalImplementingEntity)&&void 0!==n?n:void 0,internationalImplementingEntity:null!==(r=H.internationalImplementingEntity)&&void 0!==r?r:void 0,anchoredInNationalStrategy:null!==(l=H.anchoredInNationalStrategy)&&void 0!==l?l:void 0,meansOfImplementation:null!==(c=H.meansOfImplementation)&&void 0!==c?c:void 0,technologyType:null!==(o=H.technologyType)&&void 0!==o?o:void 0,etfDescription:null!==(d=H.etfDescription)&&void 0!==d?d:void 0,comment:null!==(u=H.comment)&&void 0!==u?u:void 0,ghgsAffected:null!==(m=H.ghgsAffected)&&void 0!==m?m:void 0,achievedGHGReduction:H.achievedGHGReduction,achievedGHGReductionAlternate:null!==(h=H.achievedGHGReductionAlternate)&&void 0!==h?h:void 0,expectedGHGReduction:H.expectedGHGReduction,recipientEntities:null!==(p=H.recipientEntities)&&void 0!==p?p:[],startYear1:null!==(f=H.startYear)&&void 0!==f?f:void 0,endYear1:null!==(A=H.endYear)&&void 0!==A?A:void 0,expectedTimeFrame:null!==(v=H.expectedTimeFrame)&&void 0!==v?v:void 0,ipccSubSector:null!==(x=H.ipccSubSector)&&void 0!==x?x:void 0}),_a(H.startYear),Ya(H.endYear),E.setFieldsValue({mtgMethodName:null!==(g=null===(j=H.mitigationInfo)||void 0===j?void 0:j.mitigationMethodology)&&void 0!==g?g:void 0,mtgMethodDesc:null!==(b=null===(y=H.mitigationInfo)||void 0===y?void 0:y.mitigationMethodologyDescription)&&void 0!==b?b:void 0,mtgCalculateEntity:null!==(I=null===(S=H.mitigationInfo)||void 0===S?void 0:S.mitigationCalcEntity)&&void 0!==I?I:void 0,mtgComments:null!==(k=null===(N=H.mitigationInfo)||void 0===N?void 0:N.comments)&&void 0!==k?k:void 0}),H.parentType&&(E.setFieldsValue({parentType:H.parentType,parentId:H.parentId}),Se(null!==(D=H.parentType)&&void 0!==D?D:void 0),we(null!==(G=H.parentId)&&void 0!==G?G:"")),H.achievedGHGReductionAlternate&&Za(!0),je(null!==(w=H.validated)&&void 0!==w&&w),wa(null!==(T=H.ghgsAffected)&&void 0!==T?T:void 0),(null===(C=H.documents)||void 0===C?void 0:C.length)>0&&(M=[],H.documents.forEach(function(e){M.push({key:e.createdTime,title:e.title,url:e.url})}),Ye(M)),(null===(F=H.mitigationInfo)||void 0===F||null===(R=F.methodologyDocuments)||void 0===R?void 0:R.length)>0&&(_=[],null===(z=H.mitigationInfo)||void 0===z||z.methodologyDocuments.forEach(function(e){_.push({key:e.createdTime,title:e.title,url:e.url})}),yt(_)),(null===(W=H.mitigationInfo)||void 0===W||null===(O=W.resultDocuments)||void 0===O?void 0:O.length)>0&&(B=[],null===(V=H.mitigationInfo)||void 0===V||V.resultDocuments.forEach(function(e){B.push({key:e.createdTime,title:e.title,url:e.url})}),Ot(B))),e.n=4;break;case 3:e.p=3,e.v,ie("/activities");case 4:Qe(!0);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),pi=function(){var e=(0,r.A)((0,s.A)().m(function e(){var a,i;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===t){e.n=4;break}return e.p=1,a=[],i={filterAnd:[{key:"activityId",operation:"=",value:he}],sort:{key:"supportId",order:"ASC"}},e.n=2,re("national/supports/query",i);case 2:e.v.data.forEach(function(e,t){var i,n,s,r;a.push({key:t.toString(),supportId:e.supportId,financeNature:e.financeNature,direction:e.direction,finInstrument:"International"===e.financeNature?e.internationalFinancialInstrument:e.nationalFinancialInstrument,estimatedUSD:(0,G.aE)(null!==(i=e.requiredAmount)&&void 0!==i?i:0),estimatedLC:(0,G.aE)(null!==(n=e.requiredAmountDomestic)&&void 0!==n?n:0),recievedUSD:(0,G.aE)(null!==(s=e.receivedAmount)&&void 0!==s?s:0),recievedLC:(0,G.aE)(null!==(r=e.receivedAmountDomestic)&&void 0!==r?r:0)})}),Bt(a),e.n=4;break;case 3:e.p=3,e.v,Bt([]);case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),fi=function(){var e=(0,r.A)((0,s.A)().m(function e(){var a,i,n,r;return(0,s.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if("create"===t||!he){e.n=4;break}return e.p=1,e.n=2,se("national/kpis/entities/activity/".concat(he));case 2:200!==(a=e.v).status&&201!==a.status||(i=[],n=ia,a.data.forEach(function(e){var t,a,s,r;i.push({index:n,creator:e.creatorId,id:e.kpiId,name:e.name,unit:e.kpiUnit,achieved:parseFloat(null!==(t=null===(a=e.achievements)||void 0===a||null===(s=a.find(function(e){return e.activityId===he}))||void 0===s?void 0:s.achieved)&&void 0!==t?t:0),expected:parseFloat(null!==(r=e.expected)&&void 0!==r?r:0),kpiAction:O.ZV.NONE}),n+=1}),na(n),ca(i)),e.n=4;break;case 3:e.p=3,r=e.v,console.log(r,k("kpiSearchFailed"));case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return(0,g.useEffect)(function(){if("create"===t)ri();else try{li()}catch(e){console.error("Error fetching MTG timeline data:",e),ri()}},[Ia,Na]),(0,g.useEffect)(function(){"update"===t&&0===Ia&&za&&Sa(za)},[Na]),(0,g.useEffect)(function(){di(),ui()},[Ne]),(0,g.useEffect)(function(){mi()},[Ie]),(0,g.useEffect)(function(){He&&E.setFieldsValue({parentDescription:He.description,supportType:He.type,sector:He.affSectors,affSubSectors:He.affSubSectors})},[He]),(0,g.useEffect)(function(){if(fa&&5===fa.length){for(var e,t=fa[3].values,a=0,i=Math.max(0,Math.min(30,ae-Ia));i>=0;i--)if(0!==t[i]){a=t[i];break}E.setFieldsValue({expectedGHGReduction:null!==(e=a)&&void 0!==e?e:0})}},[fa]),(0,g.useEffect)(function(){if(ga&&3===ga.length){for(var e,t=ga[2].values,a=0,i=Math.max(0,Math.min(30,ae-Ia));i>=0;i--)if(0!==t[i]){a=t[i];break}E.setFieldsValue({achievedGHGReduction:null!==(e=a)&&void 0!==e?e:0})}},[ga]),(0,g.useEffect)(function(){Promise.all([hi(),pi(),fi(),Ka()]).then(function(){rt(!0)})},[]),(0,g.useEffect)(function(){za&&Pa&&Pa>=za?E.setFieldsValue({expectedTimeFrame:Pa-za}):E.setFieldsValue({expectedTimeFrame:void 0})},[za,Pa]),(0,C.jsxs)("div",{className:"content-container",children:[(0,C.jsx)(J.A,{icon:(0,C.jsx)(K.A,{style:{color:"#ff4d4f",fontSize:"120px"}}),isDanger:!0,content:{primaryMsg:"".concat(k("deletePrimaryMsg")," ").concat(he),secondaryMsg:k("deleteSecondaryMsg"),cancelTitle:k("entityAction:cancel"),actionTitle:k("entityAction:delete")},actionRef:he,doAction:Xa,open:Xt,setOpen:ea},"delete_popup"),(0,C.jsx)("div",{className:"title-bar",children:(0,C.jsx)("div",{className:"body-title",children:k(F)})}),(0,C.jsx)(u.A,{form:E,onFinish:oi,layout:"vertical",onValuesChange:ai,children:!ot&&st?(0,C.jsxs)("div",{className:"activity-form",children:[(0,C.jsxs)("div",{className:"form-section-card",children:[(0,C.jsx)("div",{className:"form-section-header",children:k("generalInfoTitle")}),"create"!==t&&he&&(0,C.jsx)(H.A,{calledIn:"Activity",entId:he,isValidated:ge}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("activityTitle")}),name:"title",rules:[pe.required],children:(0,C.jsx)(d.A,{className:"form-input-box",disabled:N})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("activityDescTitle")}),name:"description",rules:[pe.required],children:(0,C.jsx)(X,{maxLength:250,rows:3,disabled:N})})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("parentTypeTitle")}),name:"parentType",rules:"create"!==t?void 0:[pe.required],children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:"view"===t,showSearch:!0,onChange:function(e){try{Ja()}finally{Se(e),we(void 0),"create"===t&&Sa(0),E.setFieldsValue({parentId:"",parentDescription:""})}},children:Object.values(S).map(function(e){return(0,C.jsx)(Q,{value:e,children:k(e)},e)})})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("activityStatusTitle")}),name:"status",rules:[pe.required],children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:Object.values(W.AK).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})}))]}),Ie?(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:"".concat(k("selectParentTitle")," ").concat(k(Ie))}),name:"parentId",children:(0,C.jsxs)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:"view"===t,showSearch:!0,onChange:function(e){try{Ja()}finally{we(e),ma(!0),void 0===e&&"create"===t&&Sa(0)}},children:[Fe.map(function(e){return(0,C.jsx)(Q,{value:e.id,disabled:e.hasChildProgrammes,children:(0,C.jsx)("span",{style:{color:e.hasChildProgrammes?"#ff4d4f":"inherit"},children:e.hasChildProgrammes?"".concat(e.id," : Attached to Programmes"):"".concat(e.id," - ").concat(e.title)})},e.id)}),(0,C.jsx)(Q,{value:"",children:(0,C.jsx)("span",{style:{color:"inherit"},children:"None"})},0)]})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:"".concat(k("parentDescTitle")," ").concat(k(Ie))}),name:"parentDescription",children:(0,C.jsx)(X,{maxLength:250,rows:3,disabled:!0})})}))]}):null,(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:natImplementerHeader")}),name:"nationalImplementingEntity",children:(0,C.jsx)(o.A,{mode:"multiple",size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:Object.values(O.oT).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:intImplementerHeader")}),name:"internationalImplementingEntity",children:(0,C.jsx)(o.A,{mode:"multiple",size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:Object.values(O.Y).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:recipientEntityHeader")}),name:"recipientEntities",rules:[pe.required],children:(0,C.jsx)(o.A,{mode:"multiple",size:"large",style:{fontSize:te},disabled:N,showSearch:!0,children:Object.values(O.eo).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:supportTypeTitle")}),name:"supportType",children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},disabled:!0})})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:sectorsAffectedHeader")}),name:"sector",children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},disabled:!0})})})),("programme"===Ie||"project"===Ie)&&(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:subSectorsAffectedHeader")}),name:"affSubSectors",children:(0,C.jsx)(o.A,{mode:"multiple",size:"large",style:{fontSize:te},disabled:!0})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:ipccSubSectorHeader")}),name:"ipccSubSector",rules:[pe.required],children:(0,C.jsx)(o.A,{showSearch:!0,size:"large",style:{fontSize:te},disabled:N,children:Object.entries($.s).map(function(e){return(0,C.jsx)(Q,{value:e[1],children:e[1]},e[0])})})})}))]})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:startYearTitle")}),name:"startYear1",rules:[pe.required,function(e){var t=e.getFieldValue;return{validator:function(e,a){return!a||t("endYear1")>=a?Promise.resolve():Promise.reject("Cannot be greater than End Year!")}}}],dependencies:["endYear1"],children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,onChange:function(e){!function(e){e&&(_a(e),Sa(e),"create"===t&&Sa(e))}(e)},children:fe.slice(1).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:endYearTitle")}),name:"endYear1",rules:[pe.required,function(e){var t=e.getFieldValue;return{validator:function(e,a){return!a||t("startYear1")<=a?Promise.resolve():Promise.reject("Cannot be lower than Start Year!")}}}],dependencies:["startYear1"],children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,onChange:function(e){Ya(e)},children:fe.slice(1).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:timeFrameHeader")}),name:"expectedTimeFrame",children:(0,C.jsx)(d.A,{type:"number",className:"form-input-box",disabled:!0})})}))]})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[tt&&(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:measuresTitle")}),name:"measure",children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:Object.values(W.t$).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})})),"project"===Ie&&(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:timeFrameHeader")}),name:"expectedTimeFrame",children:(0,C.jsx)(d.A,{className:"form-input-box",disabled:!0})})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:natAnchorHeader")}),name:"anchoredInNationalStrategy",children:(0,C.jsxs)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:[(0,C.jsx)(Q,{value:!0,children:"Yes"},"yes"),(0,C.jsx)(Q,{value:!1,children:"No"},"no")]})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:implMeansTitle")}),name:"meansOfImplementation",children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:Object.values(W.$I).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:techTypeTitle")}),name:"technologyType",children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:N,showSearch:!0,children:Object.values(W.dd).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:additionalInfoTitle")}),name:"etfDescription",children:(0,C.jsx)(X,{maxLength:250,rows:3,disabled:N})})}))]}),(0,C.jsx)("div",{className:"form-section-sub-header",children:k("formHeader:documentsHeader")}),(0,C.jsx)(y.A,{isSingleColumn:!1,usedIn:t,buttonText:k("entityAction:upload"),storedFiles:Pe,uploadedFiles:ze,setUploadedFiles:_e,removedFiles:Le,setRemovedFiles:Ze,setIsSaveButtonDisabled:Qe}),(0,C.jsx)(h.A,{gutter:ee,children:(0,C.jsx)(p.A,{span:24,children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("activityCommentsTitle")}),name:"comment",children:(0,C.jsx)(X,{rows:3,disabled:N})})})}),tt&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"form-section-header",children:k("formHeader:activityResultsInfoTitle")}),(0,C.jsx)("div",{className:"form-section-sub-header",children:k("formHeader:emissionInfoTitle")}),(0,C.jsx)(h.A,{gutter:ee,children:(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:ghgAffected")}),name:"ghgsAffected",rules:[pe.required],children:(0,C.jsx)(o.A,{size:"large",style:{fontSize:te},allowClear:!0,disabled:"view"===t,showSearch:!0,onChange:function(e){return wa(e)},children:Object.values(O.Wg).filter(function(e){return e!==O.Wg.COE}).map(function(e){return(0,C.jsx)(Q,{value:e,children:e},e)})})})}))}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:achieved")}),name:"achievedGHGReduction",children:(0,C.jsx)(d.A,{type:"number",className:"form-input-box",disabled:!0})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:expected")}),name:"expectedGHGReduction",children:(0,C.jsx)(d.A,{type:"number",className:"form-input-box",disabled:!0})})}))]}),(0,C.jsx)(h.A,{gutter:ee,children:(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.FW),{},{style:{paddingRight:"10px"},children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("formHeader:achievedAlt")}),name:"achievedGHGReductionAlternate",className:"form-item-checkbox-input",children:(0,C.jsx)(d.A,{addonBefore:(0,C.jsx)(f.A,{onChange:function(e){e.target.checked||E.setFieldsValue({achievedGHGReductionAlternate:void 0}),ai(),Za(e.target.checked)},disabled:N,checked:La}),type:"text",className:"form-input-box",disabled:!La||N,size:"large",maxLength:30})})}))})]}),la.length>0&&(0,C.jsx)("div",{className:"form-section-sub-header",children:k("formHeader:kpiInfoTitle")}),"view"===t?la.map(function(e,t){return(0,C.jsx)(P.Q,{index:t,inherited:!0,headerNames:[k("formHeader:kpiName"),k("formHeader:kpiUnit"),k("formHeader:achieved"),k("formHeader:expected")],kpi:e,callingEntityId:he,ownerEntityId:e.creator},t)}):la.map(function(e){return(0,C.jsx)(Y.R,{index:e.index,form:E,rules:[pe.required],isFromActivity:!0,headerNames:[k("formHeader:kpiName"),k("formHeader:kpiUnit"),k("formHeader:achieved"),k("formHeader:expected")],kpi:e,updateKPI:ei},e.index)})]}),"create"!==t&&(0,C.jsxs)("div",{className:"form-section-card",children:[(0,C.jsx)(h.A,{children:(0,C.jsx)(p.A,{span:6,children:(0,C.jsx)("div",{className:"form-section-header",children:k("supportTableHeader")})})}),(0,C.jsx)(h.A,{children:(0,C.jsx)(p.A,{span:24,children:(0,C.jsx)(j.A,{tableData:Vt,columns:ti,loading:!1,pagination:{current:Ut,pageSize:Jt,total:Vt.length,showQuickJumper:!0,pageSizeOptions:["10","20","30"],showSizeChanger:!0,style:{textAlign:"center"},locale:{page:""},position:["bottomRight"]},handleTableChange:function(e){qt(e.current),Kt(e.pageSize)},emptyMessage:k("noSupportsMessage")})})})]}),(0,C.jsxs)("div",{className:"form-section-card",children:[(0,C.jsx)("div",{className:"form-section-header",children:k("mtgInfoTitle")}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.xg),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("mtgMethodName")}),name:"mtgMethodName",children:(0,C.jsx)(d.A,{className:"form-input-box",disabled:N})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.xg),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("mtgDocUploadOne")}),children:(0,C.jsx)(y.A,{isSingleColumn:!0,usedIn:t,buttonText:k("entityAction:upload"),storedFiles:bt,uploadedFiles:vt,setUploadedFiles:xt,removedFiles:Et,setRemovedFiles:kt,setIsSaveButtonDisabled:Qe})})}))]}),(0,C.jsxs)(h.A,{gutter:ee,children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.xg),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("mtgDescTitle")}),name:"mtgMethodDesc",children:(0,C.jsx)(X,{rows:3,disabled:N})})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.xg),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("mtgDocUploadTwo")}),children:(0,C.jsx)(y.A,{isSingleColumn:!0,usedIn:t,buttonText:k("entityAction:upload"),storedFiles:Wt,uploadedFiles:Tt,setUploadedFiles:Ct,removedFiles:Gt,setRemovedFiles:Mt,setIsSaveButtonDisabled:Qe})})}))]}),(0,C.jsx)(h.A,{gutter:ee,children:(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.xg),{},{children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("mtgCalculateEntityTitle")}),name:"mtgCalculateEntity",children:(0,C.jsx)(d.A,{className:"form-input-box",disabled:N})})}))}),(0,C.jsx)(h.A,{gutter:ee,children:(0,C.jsx)(p.A,{span:24,children:(0,C.jsx)(u.A.Item,{label:(0,C.jsx)("label",{className:"form-item-header",children:k("mtgComments")}),name:"mtgComments",children:(0,C.jsx)(X,{rows:3,disabled:N})})})})]}),tt&&Ia&&Na?(0,C.jsxs)("div",{className:"form-section-card",children:[(0,C.jsxs)(h.A,{children:[(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.JS),{},{style:{paddingTop:"6px"},children:(0,C.jsx)("div",{className:"form-section-header",children:k("mitigationTimelineTitle")})})),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.tn),{},{children:"update"===t&&(0,C.jsx)(A.A,{type:"primary",size:"large",block:!0,onClick:function(){ci()},disabled:!Fa,children:k("entityAction:update")})}))]}),(0,C.jsx)(h.A,{children:(0,C.jsx)(p.A,{span:24,children:(0,C.jsx)(R,{expectedTimeline:fa,actualTimeline:ga,loading:!1,method:t,mtgStartYear:Ia,mtgRange:30,onValueEnter:function(e,t,a,i){var n=i?parseFloat(parseFloat(i).toFixed(2)):0;if("expected"===e){var s=fa.map(function(e){return e.topic===t?(e.values[a-Ia]=n,e.total=(0,G.DW)(e.values),e):e});t!==s[0].topic&&t!==s[1].topic||(s[3].values=(0,G.RZ)(s[0].values,s[1].values,ni()),s[3].total=(0,G.DW)(s[3].values)),t!==s[0].topic&&t!==s[2].topic||(s[4].values=(0,G.RZ)(s[0].values,s[2].values,ni()),s[4].total=(0,G.DW)(s[4].values)),Aa(s)}else{var r=ga.map(function(e){return e.topic===t?(e.values[a-Ia]=n,e.total=(0,G.DW)(e.values),e):e});r[2].values=(0,G.RZ)(r[0].values,r[1].values,ni()),r[2].total=(0,G.DW)(r[2].values),ja(r)}Ra(!0)},t:k})})})]}):null,"create"!==t&&(0,C.jsxs)("div",{className:"form-section-timelineCard",children:[(0,C.jsx)("div",{className:"form-section-header",children:k("formHeader:updatesInfoTitle")}),(0,C.jsx)(B.A,{recordType:"activity",recordId:he})]}),"create"===t&&(0,C.jsxs)(h.A,{className:"sticky-footer",gutter:20,justify:"end",children:[(0,C.jsx)(p.A,{children:(0,C.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ie("/activities")},children:k("entityAction:cancel")})}),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.Cs),{},{children:(0,C.jsx)(u.A.Item,{children:(0,C.jsx)(A.A,{type:"primary",size:"large",block:!0,htmlType:"submit",children:k("entityAction:add")})})}))]}),"view"===t&&(0,C.jsxs)(h.A,{className:"sticky-footer",gutter:20,justify:"end",children:[(0,C.jsx)(p.A,{children:(0,C.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ie("/activities")},children:k("entityAction:back")})}),oe.can(M.rc.Validate,z.J)&&(0,C.jsx)(p.A,{children:(0,C.jsx)(u.A.Item,{children:(0,C.jsx)(v.A,{placement:"topRight",title:ue?void 0:k("error:validationPermissionRequired"),showArrow:!1,children:(0,C.jsx)(A.A,{type:"primary",size:"large",block:!0,onClick:function(){Qa()},loading:ht,disabled:!ue,children:k(ge?"entityAction:unvalidate":"entityAction:validate")})})})})]}),"update"===t&&(0,C.jsxs)(h.A,{className:"sticky-footer",gutter:20,justify:"end",children:[(0,C.jsx)(p.A,{children:(0,C.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ie("/activities")},children:k("entityAction:cancel")})}),oe.can(M.rc.Delete,z.J)&&(0,C.jsx)(p.A,{children:(0,C.jsx)(A.A,{type:"default",size:"large",block:!0,onClick:function(){ea(!0)},style:{color:"red",borderColor:"red"},children:k("entityAction:delete")})}),(0,C.jsx)(p.A,(0,n.A)((0,n.A)({},q.Cs),{},{children:(0,C.jsx)(u.A.Item,{children:(0,C.jsx)(A.A,{type:"primary",size:"large",block:!0,htmlType:"submit",disabled:$e,children:k("entityAction:update")})})}))]})]}):(0,C.jsx)(x.A,{className:"loading-center",size:"large"})})]})}},8255:function(e,t,a){a.d(t,{x:function(){return c}});var i=a(9379),n=["comments"],s=["additionalProjectNumber","internationalImplementingEntities","comment"],r=["measure","nationalImplementingEntity","internationalImplementingEntity","anchoredInNationalStrategy","meansOfImplementation","technologyType","etfDescription","comment","achievedGHGReductionAlternate"],l=["internationalSource","nationalSource","financingStatus","nationalFinancialInstrument","internationalFinancialInstrument","internationalSupportChannel"],c=function(e,t){var a=[];switch(t){case"action":break;case"programme":a=n;break;case"project":a=s;break;case"activity":a=r;break;case"support":a=l}for(var c=(0,i.A)({},e),o=0,d=a;o<d.length;o++){var u=d[o];c.hasOwnProperty(u)&&("string"===typeof c[u]&&""===c[u]||c[u]instanceof Array&&0===c[u].length||"undefined"===typeof c[u])&&(c[u]=null)}return c}},1054:function(e,t,a){a.d(t,{F:function(){return n}});var i=a(454),n=function(e){return{required:{required:"view"!==e,message:"Required Field"},number:{pattern:/^[0-9]+$/,message:"Please enter a valid number"},greaterThanZero:function(e){return(0,i.A)(e),{validator:function(e,t){return t?t>0?Promise.resolve():Promise.reject("Need to be Greater than Zero"):Promise.resolve()}}}}}},6698:function(){}}]);
//# sourceMappingURL=663.70184e18.chunk.js.map